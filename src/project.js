window.__require=function t(n,e,i){function a(r,s){if(!e[r]){if(!n[r]){var c=r.split("/");if(c=c[c.length-1],!n[c]){var u="function"==typeof __require&&__require;if(!s&&u)return u(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+r+"'")}}var h=e[r]={exports:{}};n[r][0].call(h.exports,function(t){return a(n[r][1][t]||t)},h,h.exports,t,n,e,i)}return e[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<i.length;r++)a(i[r]);return a}({CardSkill:[function(t,n,e){"use strict";function i(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}cc._RF.push(n,"d43ffLwMKJFXLw4BYrowNCL","CardSkill"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.gameMain=this.node.getComponent("GameMain"),this.skillJs=this.node.getComponent("Skill")},notWork:function(t){ai.isNotBuff=!0,hjm._num.lab+=ai.touchCard.num,ai.tip(t)},affray:function(t,n){var e=ai.map.get(n);if(!e||-1!==e.type)return this.notWork("\u8fd9\u4e2a\u5361\u724c\u53ea\u80fd\u4f5c\u7528\u4e8e\u654c\u4eba\u7684\u65b9\u5757"),t();this.gameMain.runPos=n,this.node.touch="stop",t(this.gameMain,"moveRole"),t(this.gameMain,"addBuff"),t(this.gameMain,"checkDie"),this.affray_mainFun(t,n),t(this.gameMain,"endMove"),t(this.gameMain,"checkDie"),t(this.gameMain,"delCardTouch"),t()},affray_mainFun:function(t,n){var e=this.skillJs,i=ai.map.get(n);ai.map.on(function(n,a){if(ai.map.get(a,"type")){var o=ai.map.get(a);if(o===i)return;t(e,"oneAct",o,a,n)}}),ai.map.on(ai.nullPos)},devourAtk:function(t,n){ai.map.get(n);if(1!==ai.map.get(n,"type"))return this.notWork("\u53ea\u80fd\u4f5c\u7528\u4e8e\u53cb\u519b\u4e0a"),t();this.gameMain.runPos=n,this.node.touch="stop",t(this.gameMain,"moveRole"),t(this.gameMain,"addBuff"),t(this.gameMain,"checkDie"),t(this,"devourAtk_mainFun",ai.nullPos),t(this.gameMain,"endMove"),t(this.gameMain,"checkDie"),t(this.gameMain,"delCardTouch"),t(this,"saveCardArr"),t()},devourAtk_mainFun:function(t,n){var e=this;if(1!==ai.map.get(n,"type"))return t();var i=ai.map.get(n),a=-i.type;ai.map.on(function(t,n){if(ai.map.get(n,"type")===a){var o=ai.map.get(n),r=o.atk;e.gameMain.addAtkAdd(o,-r),e.gameMain.addAtkAdd(i,r)}}),ai.map.on(n),t()},juedou:function(t){var n,e=this,a=0,o=function(t){var n=[];return ai.map.find(function(e){e&&e.type===t&&(e.skillData.isJuedou=!0,n.push(e))}),n}(1);n=[].concat(i(o));var r=null;(r=function(){var i=n[a++];if(!i)return t();if(!i.skillData.isJuedou||i.hp<=0)return r();var o=ai.map.find(function(t,n){if(t===i)return n}),s=[e.skillJs,"one",i,o],c=[e.gameMain,"checkDie"];zt.addRunFun(s,c,r)()})()},mobility:function(t,n){ai.map.find(function(t,n){t&&1===t.type&&t.atk++}),t()},stoneMan:function(t,n){var e=this,i=ai.map.get(n);return cc.log("stoneMan",i,n,i.type),i&&0===i.type?("stoneMan"===i.skillData.name?i.num+=1:(i.skillData.name="stoneMan",i.num=1,i.card=ai.touchCard.card,i.skillData.atkFun=function(t,n,a){cc.log("stoneMan attack");ai.map.on(function(t,n){if(-1===ai.map.get(n,"type"))return n});var o=ai.map.on(a);if(!o)return t();e.skillJs.oneAct(t,n,a,o,function(t,n,a){e.skillJs.blood(n,-i.num)})}),i.card=!0,i.num=!0,this.gameMain.delCardTouch(t)):(this.notWork("\u53ea\u80fd\u4f5c\u7528\u7a7a\u5757"),t())},moreRun:function(t,n){hjm._round.lab++;var e={name:"moreRun",state:"myPreRoundBuff",delState:"meEndTurnBuff",num:1,fun:function(t){hjm._round.lab+=t.num}};this.gameMain.addState(e),tz(.1,function(){return t()})},twoAtkAdd:function(t,n){var e=this;ai.map.find(function(t){t&&1===t.type&&e.gameMain.addAtkAdd(t,t.atk)}),tz(.1,function(){return t()})},enAtk0:function(t,n){var e=this;ai.map.find(function(t){t&&-1===t.type&&e.gameMain.addAtkAdd(t,-t.atk)}),tz(.1,function(){return t()})},resetRun:function(t,n){ai.map.find(function(t){t&&(t.notRun=!1)}),tz(.1,function(){return t()})},yidong:function(t,n){if(!ai.map.get(n))return this.notWork("\u9700\u8981\u6307\u5b9a\u65b9\u5757"),t();this.gameMain.runPos=n,this.node.touch="stop",t(this.gameMain,"moveRole"),t(this.gameMain,"addBuff"),t(this.gameMain,"checkDie"),t(this.gameMain,"endMove"),t(this.gameMain,"checkDie"),t(this.gameMain,"delCardTouch"),t(this,"saveCardArr"),t()},saveCardArr:function(t){for(var n=[],e=0;e<ai.cardArr.length;e++){var i=ai.cardArr[e];0!==i.num?n.push(i):(ai.touchCard===i&&(ai.touchCard=null),i.del())}for(var a=.5*(1-n.length)*168,o=0;o<n.length;o++)n[o].x=168*o+a;ai.cardArr=n,t()}}),cc._RF.pop()},{}],Data:[function(t,n,e){"use strict";cc._RF.push(n,"814c9s8f3BBM6CzOPAIeF82","Data"),window.ai=window.ai?window.ai:{},ai.rewardArr=[{hp:2},{hp:3},{skill:0},{hp:4},{_atk:1},{power:3},{hp:3},{hp:4},{power:3},{_hp:4},{_atk:2},{skill:1},{hp:4},{hp:3},{power:3},{hp:4},{hp:5},{power:3},{hp:6},{hp:4},{power:3},{_hp:6},{_atk:2},{skill:2},{hp:4},{hp:5},{power:3},{hp:6},{hp:5},{power:3},{hp:6},{hp:7},{power:3},{_hp:8},{_atk:3},{skill:3},{hp:6},{hp:5},{power:3},{hp:6},{hp:7},{power:3},{hp:8},{hp:7},{power:3},{_hp:10},{_atk:3},{skill:4},{hp:6},{hp:7},{power:3},{hp:8},{hp:7},{power:3},{hp:8},{hp:9},{power:3},{_hp:12},{_atk:3},{skill:5},{hp:8},{hp:7},{power:3},{hp:8},{hp:10},{power:3},{hp:10},{hp:9},{power:3},{_hp:14},{_atk:3},{skill:6},{hp:8},{hp:7},{power:3},{hp:12},{hp:10},{power:3},{hp:10},{hp:13},{power:3},{_hp:16},{_atk:4},{skill:7},{hp:8},{hp:9},{power:3},{hp:12},{hp:12},{power:3},{hp:14},{hp:13},{power:3},{_hp:18},{_atk:4},{skill:8},{hp:10},{hp:9},{power:3},{hp:12},{hp:14},{power:3},{hp:14},{hp:15},{power:3},{_hp:19},{_atk:4},{skill:9},{hp:10},{hp:11},{power:3},{hp:16},{hp:14},{power:3},{hp:16},{hp:15},{power:3},{_hp:20},{_atk:5},{skill:10},{hp:12},{hp:11},{power:3},{hp:16},{hp:16},{power:3},{hp:16},{hp:17},{power:3},{_hp:21},{_atk:6},{skill:11},{hp:12},{hp:13},{power:3},{hp:16},{hp:18},{power:3},{hp:18},{hp:17},{power:3},{_hp:22},{_atk:6},{skill:12}],ai.skillNameArr=["jointForces","payback","one2","aoe","moreAtk","shadow","weiou","shadow2","jointForces2","one3","weiou2","moreAtk2","payback2","aoe2","one4"],ai.enNameArr=[[1,1],[1,1,2],[1,1,3],[1,2,3],0,[3,3,6],[2,2,5],[6,5,5],1,[5,5,9],[6,6,8],[8,9,9],2,[8,8,12],[9,9,11],[12,12,11],3,[12,12,13],[11,11,14],[13,13,14],4,[14,14,15],[13,13,16],[15,15,16],5,[15,15,17],[16,16,18],[17,17,18],6,[17,17,19],[18,18,20],[20,19,19],7,[21,19,19],[20,20,22],[21,21,22],8,[21,21,23],[22,22,24],[23,24,24],9,[25,24,24],[23,26,23],[25,25,26],10,[25,25,27],[26,26,28],[27,27,28],11,12],ai.bossNameData={0:[[4,2,3],[100,101,101]],1:[[8,9,10],[117,118,118]],2:[[110,111,111],[115,116,116]],3:[[112,113,113],[114,114]],4:[[108,109,109],[102,103,103]],5:[[106,107,107],[119,119]],6:[[105,105,104],[120,121,121]],7:[[122,2,2],[123,2,2]],8:[[124,125,125],[126,126,126]],9:[[127,127,127],[128]],10:[[129,130,130],[131,132,132]],11:[[133,133,133],[134,134,134]],12:[[135,136,136],[138,138,138]]},cc._RF.pop()},{}],DylAd:[function(t,n,e){"use strict";cc._RF.push(n,"f8c18Hs2QVNoY2ruupVy940","DylAd"),cc.Class({extends:cc.Component,properties:{isDebug:!1},onLoad:function(){if(!ai._isFristDylAd){ai._isFristDylAd=!0;var t=this.isDebug,n=!1;t?setTimeout(function(){n=!0},10):tz(2,function(){yomob.TGSDK.setDebugModel(!0),yomob.TGSDK.initialize("Jm50jt3WF35737cj0TrD"),yomob.TGSDK.preload()}),dyl.__adFun=function(){},dyl.__isLoading=!1;dyl.addAd=function(e){e&&(dyl.__adFun=e);return(t?n:yomob.TGSDK.couldShowAd("GfadZFzn2F1ngCMLwQE"))?(t?cc.log("\u5047\u5e7f\u544a\u51fa\u6765\u4e86\uff0c\u54c8\u54c8\u54c8\u54c8\u54c8"):yomob.TGSDK.showAd("GfadZFzn2F1ngCMLwQE"),dyl.__adFun(),!0):(cc.warn(222222),!dyl.__isLoading&&(dyl.__isLoading=!0,cc.loader.loadRes("dylLoadingAd",function(t,n){var e=cc.instantiate(n);cc.director.getScene().getChildren()[0].addChild(e)}),!1))}}}}),cc._RF.pop()},{}],DylBar:[function(t,n,e){"use strict";cc._RF.push(n,"627c13XFIpEA5JjMypfts2c","DylBar"),cc.Class({extends:cc.Component,editor:{menu:"dyl/\u2665 \u8840\u6761",executeInEditMode:!0},properties:{_isNew:!0,_maxHp:1,_hp:1,_barMaxLen:0,progress:{default:1,min:0,max:1,slide:!0,notify:function(t){return this.resetProgress(t)}}},__preload:function(){var t=this;if(this.delActFun=function(){return null},this.checkIsNew(),this._bar=this.node.getChildByName("bar"),this.node.set=function(n){return t.setFun(n)},this.node.change=function(n,e){return t.changeFun(n,e)},0===this._barMaxLen){var n=this.getSize(this._bar).x;if(n<1){if(this.getSize(this.node).x<1)return cc.warn("\u8840\u6761\u603b\u957f\u5ea6\u4e3a0, \u5f53\u524d\u8282\u70b9\u548cbar\u8282\u70b9\u7684\u957f\u5ea6\u90fd\u662f0",n);this._bar.width=this.node.width,this._bar.height=this.node.height}this._barMaxLen=n/this.progress}},getSize:function(t){var n=(t=t.node?t.node:t).getContentSize(),e=n.width,i=n.height;return cc.v2(e,i)},resetProgress:function(t){t>0&&(this._barMaxLen=this.getSize(this._bar).x/t),this._bar.width=this._barMaxLen*this.progress},resetSpr:function(){this.node.getComponent(cc.Sprite).spriteFrame=this.backSpr,this._bar.getComponent(cc.Sprite).spriteFrame=this.barSpr;var t=this.getSize(this.node);this._maxX=t.x*this.scaleX,this._maxY=t.y*this.scaleY,this._bar.height=this._maxY,this._bar.setAnchorPoint(0,.5),this._bar.setPosition(-.5*this._maxX,0),this.resetData()},resetData:function(){this._maxHp<=0?this._bar.width=0:this._bar.width=this._barMaxLen*this._hp/this._maxHp},checkIsNew:function(){},setFun:function(t){if("string"==typeof t||"number"==typeof t)return"string"==typeof t?(this._maxHp=Number(t),this._maxHp<0&&(this._maxHp=0),"0"===t[0]?this._hp=this._maxHp:this._hp>this._maxHp&&(this._hp=this._maxHp),this._hp):t>this._maxHp?(this._hp=this._maxHp,this._hp):t<0?(this._hp=0,this._hp):void(this._hp=t);cc.warn("label \u7684string \u7684data\u7c7b\u578b\u53ea\u80fd\u662f\u5b57\u7b26\u4e32\u6216\u6570\u5b57",t)},changeFun:function(t,n){var e=this;if(this.delActFun(),this._maxHp<=0)return cc.log("\u6700\u5927\u8840\u91cf\u90fd\u662f 0"),this._bar.width=0;n>this._maxHp&&(n=this._maxHp),n===t&&(this._bar.width=this._barMaxLen*this._hp/this._maxHp),this._bar.width=this._barMaxLen*n/this._maxHp;var i=300;i*=t>n?1:-1;var a=(t-n)*this._barMaxLen/(i*this._maxHp);this.delActFun=dyl.update(function(n){return e._bar.width=e._bar.width+i*n,!((a-=n)<=0&&(e._bar.width=e._barMaxLen*t/e._maxHp,1))})}}),cc._RF.pop()},{}],DylButton:[function(t,n,e){"use strict";cc._RF.push(n,"cd72cG+IilO6qAadQpr/XqC","DylButton");var i=function(){function t(t,n){var e=[],i=!0,a=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(i=(r=s.next()).done)&&(e.push(r.value),!n||e.length!==n);i=!0);}catch(t){a=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(a)throw o}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();cc.Enum({Null:0,NextScene:1,NextLevel:2,Restart:3,ExitGame:4,Popup:5,Popdown:6,Buy:7});cc.Class({extends:cc.Component,editor:{menu:"dyl/\u264e \u6309\u94ae",executeInEditMode:!0,inspector:"packages://dyl-button/DylButton.js"},properties:{touchFun:{default:function(){return new cc.Component.EventHandler},type:cc.Component.EventHandler,displayName:"\u89e6\u53d1\u4e8b\u4ef6"},nodeName:"",jsName:"",funName:"",popupNode:cc.Node,popdownNode:cc.Node,sceneType:{default:"NextLevel",notify:function(){"Buy"===this.sceneType&&this.setBuy()}},nextScene:"",coin:{default:0,displayName:"\u4ef7\u683c"},coinName:{default:"coin",displayName:"\u8d27\u5e01\u5355\u4f4d"},toolName:{default:"",displayName:"\u7269\u54c1\u8def\u5f84\uff08.\u9694\u5f00\uff09"},hasSetBuy:!1,isAutoSave:{default:!1,displayName:"\u662f\u5426\u8981\u81ea\u52a8\u4fdd\u5b58"}},__preload:function(){this.myInit()},setBuy:function(){if(!this.hasSetBuy){this.hasSetBuy=!0;var t=new cc.Node("noMoney");this.node.addChild(t),t.addComponent(cc.Sprite),t.width=this.node.width,t.height=this.node.height,t=new cc.Node("coinNum"),this.node.addChild(t),t.addComponent(cc.Label),t.lineHeight=this.node.height,t.fontSize=.8*this.node.height,t=new cc.Node("hasBuy"),this.node.addChild(t),t.addComponent(cc.Sprite),t.width=this.node.width,t.height=this.node.height}},getTopNode:function(){return cc.director.getScene().getChildren()[0]},getSceneArr:function(){return["aa","bb"]},myInit:function(){var t=null;this.node.getChildByName("topSpr")&&((t=this.node.getChildByName("topSpr")).active=!1);var n=this,e=null;this.node.on("touchstart",function(i){t?t.active=!0:(e=n.node.getScale(),n.node.color,n.node.setScale(.92*e))}),this.node.on("touchend",function(i){if(t)return t.active=!1,void n.onClick();n.node.setScale(e),n.onClick()}),this.node.on("touchcancel",function(i){"Buy"!==n.sceneType&&(t?t.active=!1:n.node.setScale(e))}),"Buy"===this.sceneType&&this.initBuy()},initBuy:function(){var t=this;this.node.add=function(){for(var n=arguments.length,e=Array(n),i=0;i<n;i++)e[i]=arguments[i];for(var a=e.length-1;a>=0;a--){var o=e[a];"number"==typeof o?t.coin=o:"string"==typeof o?t.toolName=o:"function"==typeof o&&(t.endCheckBuyFun=o)}t.initBuy1()},""===this.toolName||this.initBuy1()},initBuy1:function(){var t=this;this.dyl_noMoneyNode=this.node.getChildByName("noMoney");var n=this.node.getChildByName("coinNum");n&&(this.dyl_coinNumLab=n.getComponent(cc.Label),this.dyl_coinNumLab.string=String(this.coin)),this.dyl_hasBuyNode=this.node.getChildByName("hasBuy");var e=this.toolName.split(".");if(1===e.length){var a=e[0];"number"==typeof hjm[a]?(this.dyl_isCanBuy=function(){return!0},this.dyl_buy=function(){hjm[a]++,hjm[this.coinName]-=this.coin}):(this.dyl_isCanBuy=function(){return!hjm[a]},this.dyl_buy=function(){hjm[a]=!0,hjm[this.coinName]-=this.coin})}else{if(2!==e.length)return cc.error("\u53c2\u6570\u5e94\u8be5\u662fstr\u6216\u8005str.str",this.toolName);var o=i(e,2),r=o[0],s=o[1];if(Array.isArray(hjm[r]))this.dyl_isCanBuy=function(){return hjm[r].indexOf(s)<0},this.dyl_buy=function(){hjm[r].push(s),hjm[this.coinName]-=this.coin,hjm[r]=hjm[r]};else{var c=null,u=hjm[r];for(var h in u){c="number"!=typeof u[h];break}if(null===c)return cc.warn("DylButton",this.toolName,"\u8fd9\u662f\u4e00\u4e2a\u7a7a\u5bf9\u8c61\uff0c\u4e0d\u77e5\u9053\u5230\u5e95\u662f\u4e0d\u662f\u552f\u4e00\u7269\u54c1");c?(this.dyl_isCanBuy=function(){return!u[s]},this.dyl_buy=function(){u[s]=!0,hjm[this.coinName]-=this.coin}):(this.dyl_isCanBuy=function(){return!0},_hjmIsObjTabFun(r)?this.dyl_buy=function(){u[s]?u[s]++:u[s]=1,hjm[r]=hjm[r],hjm[this.coinName]-=this.coin}:this.dyl_buy=function(){u[s]?u[s]++:u[s]=1,hjm[this.coinName]-=this.coin})}}this.dyl_updateBuy&&_hjmDelArrFun(this.coinName,this.dyl_updateBuy),this.dyl_updateBuy=function(){t.dyl_isCanBuy()?dyl.set(t.dyl_hasBuyNode,"active",!1):dyl.set(t.dyl_hasBuyNode,"active",!0),hjm[t.coinName]<t.coin?dyl.set(t.dyl_noMoneyNode,"active",!0):dyl.set(t.dyl_noMoneyNode,"active",!1)},_hjmAddArrFun(this.coinName,this.dyl_updateBuy),this.dyl_updateBuy()},buy:function(){this.dyl_isCanBuy()&&hjm[this.coinName]>=this.coin&&(this.endCheckBuyFun?this.endCheckBuyFun()&&this.dyl_buy():this.dyl_buy())},onDestroy:function(){this.dyl_updateBuy&&_hjmDelArrFun(this.coinName,this.dyl_updateBuy)},clickFun:function(){""!==this.funName&&hjm[this.nodeName].getComponent(this.jsName)[this.funName]()},onClick:function(){var t=this;if(cc.loader.load(cc.url.raw("resources/dyl/button.mp3"),function(t,n){t&&cc.error(t),cc.audioEngine.play(n,!1,1)}),"NextScene"===this.sceneType)return this.clickFun(),cc.director.loadScene(this.nextScene);if("NextLevel"===this.sceneType){this.clickFun();var n=cc.director.getScene().name,e=n.replace(/[^0-9]/gi,""),i=n.split(e);if(1===i.length)return cc.error("\u8fd9\u4e2a\u5173\u5361\u547d\u540d\u6709\u95ee\u9898\uff0c\u4e0d\u662f\u53ea\u6709\u4e00\u4e2a\u6570\u5b57");e=Number(e)+1;var a=i[0]+String(e)+i[1];return cc.director.loadScene(a)}if("ExitGame"===this.sceneType){if(this.clickFun(),cc.sys.isMobile)return cc.director.end();if(cc.sys.isBrowser)return window.opener=null,window.open("","_self"),void window.close();cc.sys.isNative}else{if("Restart"===this.sceneType)return this.clickFun(),void cc.director.loadScene(cc.director.getScene().name);"Popup"===this.sceneType?(this.clickFun(),this.popupNode.active=!0):"Popdown"===this.sceneType?this.popdownNode.del(function(){return t.clickFun()}):"Buy"===this.sceneType?this.buy():this.clickFun()}}}),cc._RF.pop()},{}],DylLab:[function(t,n,e){"use strict";cc._RF.push(n,"c1eaa+MGhdOJKV/CWWREtED","DylLab");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};cc.Class({extends:cc.Component,editor:{menu:"dyl/\u32a3 \u6587\u5b57",inspector:"packages://dyl-nowshow/DylNotshow.js"},properties:{},__preload:function(){this.dylPreload()},dylPreload:function(){var t=this;this.node._hasDylLabInit||(this.node._hasDylLabInit=!0,this._data={},this.initLab(),this.node.say=function(n,e){var i=t._data[n];if(!i)return cc.error("\u6ca1\u6709\u8fd9\u79cdlabel\u7684\u8282\u70b9",n);for(var a=[],o=0;o<i.length;o++){var r=i[o].getComponent(cc.Label);r&&(r.string="",a.push(r))}if(0===a.length)return cc.warn("say\u6ca1\u6709label\u76f8\u5173\u7684\u8282\u70b9",n,e);t._data[n].value=e;for(var s=function(t){var n=++a[t]._dylSayId,i=e.length,o=0;dyl.update(function(r){if(n!==a[t]._dylSayId)return!1;var s=(o+=r)/.1+1>>0;return s>=i&&(s=i),lab.string=e.slice(0,s),s<i})},c=0;c<a.length;c++)s(c)})},addDataNode:function(t,n){this._data[t]?this._data[t].push(n):this._data[t]=[n]},setProgressBar:function(t){t._dylProgressBar=t.getComponent(cc.ProgressBar),t.set=function(t){if("number"==typeof t)return t>1&&(t=1),t<0&&(t=0),this._dylProgressBar.progress=t,t;cc.warn("progressBar \u7684data\u7c7b\u578b\u53ea\u80fd\u662f\u5b57\u7b26\u4e32\u6216\u6570\u5b57",t)};for(var n=t.name.split("_"),e=0;e<n.length;e++){var i=n[e];""!==i&&this.addDataNode(i,t)}},setSameNode:function(t){for(var n=t.name.split("_"),e=0;e<n.length;e++){var i=n[e];""!==i&&(this.addDataNode(i,t),this._data[i].value=t)}},setLabel:function(t){t._dylLabel=t.getComponent(cc.Label),t.set=function(t){if("string"==typeof t||"number"==typeof t){var n=String(t);this._dylLabel.string=n,this._dylLabel._dylSayId++}else cc.warn("label \u7684string \u7684data\u7c7b\u578b\u53ea\u80fd\u662f\u5b57\u7b26\u4e32\u6216\u6570\u5b57",t)},t.change=function(t,n){},t._dylLabel._dylSayId=0;for(var n=t.name.split("_"),e=0;e<n.length;e++){var i=n[e];""!==i&&this.addDataNode(i,t)}},setDylNode:function(t){for(var n=t.name.split("_"),e=0;e<n.length;e++){var i=n[e];""!==i&&this.addDataNode(i,t)}},setData:function(t,n){var e=this._data[t];Object.defineProperty(this.node,t,{get:function(){return void 0===e.value?cc.error("\u6ca1\u6709\u8fd9\u4e2a\u6570\u636e",t):e.value},set:function(t){if("boolean"!=typeof t)if(t&&"object"===(void 0===t?"undefined":i(t))&&"function"!=typeof t.getChildren&&void 0!==t.x&&void 0!==t.y){!0===t.x&&(t.x=e[0].x),!0===t.y&&(t.y=e[0].y);for(var n=t.sub(e[0]),a=0;a<e.length;a++){var o=e[a];o.setPosition(n.add(o))}}else if("cc.Color"!==cc.js.getClassName(t))if(cc.Action.prototype.isPrototypeOf(t))for(var r=0;r<e.length;r++){var s=e[r],c=t.clone();s.runAction(c)}else if(Array.isArray(t)){var u=t;if(1===u.length)for(var h=u[0],d=0;d<e.length;d++){e[d].rotation=h}else if(2===u.length)for(var l=u[0],f=u[1],p=0;p<e.length;p++){e[p].setScale(l,f)}}else{if("cc.Node"===cc.js.getClassName(t))return t.getComponent(cc.Sprite)?void(e.value.getComponent(cc.Sprite).spriteFrame=t.getComponent(cc.Sprite).spriteFrame):cc.error("\u5982\u679c\u63a5\u53d7\u8282\u70b9\uff0c\u90a3\u5c31\u4ee3\u8868\u590d\u5236\u8fd9\u4e2a\u8282\u70b9\u7684\u7eb9\u7406\uff0c\u4f46\u4f60\u8fdecc.Sprite\u7ec4\u4ef6\u90fd\u6ca1\u6709");if("function"!=typeof t){for(var m=e.value;;){for(var y=!1,v=0;v<e.length;v++){var g=e[v];if(g.set){var _=g.set(t);if(void 0!==_){t=_,y=!0;break}}}if(!y)break}e.value=t,void 0===m?m=t:"function"==typeof m.getChildren&&(m=t);for(var A=0;A<e.length;A++){var b=e[A];"function"==typeof b.change&&b.change(t,m)}"function"==typeof e.notify&&e.notify(t,m)}else e.notify=t}else for(var k=0;k<e.length;k++){e[k].color=t}else for(var w=0;w<e.length;w++){e[w].active=t}}}),void 0!==n&&(this.node[t]=n)},initLab:function(){for(var t=this.node.getChildren(),n=0;n<t.length;n++){var e=t[n];if("say"===e.name)return cc.error("say \u662fapi\u7684\u540d\u5b57\uff0c\u4e0d\u80fd\u7528");e.getComponent("DylBar")?(this.setDylNode(e),e.getComponent("DylBar").__preload()):e.getComponent(cc.Label)||e.getComponent(cc.ProgressBar)?e.getComponent(cc.ProgressBar)?this.setProgressBar(e):e.getComponent(cc.Label)?this.setLabel(e):cc.error("\u6211\u4e5f\u4e0d\u77e5\u9053\u6709\u4ec0\u4e48\u9519"):this.setSameNode(e)}for(var i in this._data)if(this.setData(i,this.node[i]),1===this._data[i].length){var a=this._data[i][0];a.getComponent(cc.Sprite)&&(a.dylSpriteNodeName=i)}}}),cc._RF.pop()},{}],DylList:[function(t,n,e){"use strict";cc._RF.push(n,"578a4sw++tE7JtsD2057jFj","DylList");var i=cc.Enum({up:0,down:1,left:2,right:3});cc.Class({extends:cc.Component,editor:{menu:"dyl/\u5217\u8868"},properties:{dir:{default:i.up,type:i},d:8,startP:5,maxId:0,isTouch:!0},update:function(t){},__preload:function(){var t=this;this.isNotNode=!1;var n=function(){t.isNotNode=!0;for(var n=t.node.getChildren(),e=n.length-1;e>=0;e--)n[e].active=!1};if(0===this.maxId)return n();if(this.maxId<0&&(this.maxId=0),this.oriStartP=this.startP,this.isVertical=this.dir===i.up||this.dir===i.down,this.t=0,this.addFun=null,this.buttonFun=null,this.runFun=null,this.nodeArr=[],this.poolArr=[],this.nodeLen=0,this.startId=0,this.endId=0,this.len=this.isVertical?dyl.getSize(this.node).y:dyl.getSize(this.node).x,this.len<1)return cc.warn("DylList \u5f53\u524d\u8282\u70b9\u7684\u957f\u5ea6\u5c0f\u4e8e1",this.len);for(var e=this.node.getChildren(),a=0;a<e.length;a++){var o=this.isVertical?dyl.getSize(e[a]).y:dyl.getSize(e[a]).x;if(o<1)return cc.warn("DylList \u8fd9\u4e2a\u8282\u70b9\u7684\u957f\u5ea6\u5c0f\u4e8e1",e[a].name);this.poolArr.push(this.addPool(e[a],o)),this.poolArr[a].d=o,this.nodeLen+=o+this.d}this.minP=this.startP,this.getMaxP(),this.poolArr.add=function(t){var n=t%this.length;return n<0&&(n+=this.length),this[n].add()},this.add(this.startP),this.node.add=function(){for(var e=arguments.length,i=Array(e),a=0;a<e;a++)i[a]=arguments[a];if("number"!=typeof i[0]){t.addFun=null,t.buttonFun=null;for(var o=0;o<i.length;o++)if("function"==typeof i[o])t.addFun?t.buttonFun=i[o]:t.addFun=i[o];else if("number"==typeof i[o]){if(t.maxId=i[o],0===t.maxId)return n();t.isNotNode=!1,t.maxId<0&&(t.maxId=0),t.getMaxP()}return t.resetArr(t.startId,t.endId,0,0),t.resetPos({p:0,sId:0,eId:0}),t.add(t.oriStartP),t.nodeArr}return t.add(i[0]),t.nodeArr},this.isTouch?this.setTouch():this.setButton()},getMaxP:function(){if(this.maxId<=0)this.maxP=0;else{var t=this.poolArr.length,n=Math.floor(this.maxId/t),e=n*this.nodeLen;n=this.maxId-n*t;for(var i=0;i<n;i++)e+=this.poolArr[i].d+this.d;e=(e-=this.oriStartP)-this.d-this.len,this.maxP=e}},setTouch:function(){var t=this,n=!1,e=0,a=0,o=0,r=null;this.node.on("touchstart",function(i){if(!t.isNotNode){var s=i.getLocation();t.runFun&&(t.runFun(),t.runFun=null),n=!1,e=t.isVertical?s.y:s.x,a=e,o=e,r=s}}),this.node.on("touchmove",function(e){if(!t.isNotNode){var s=e.getLocation();(s.x-r.x)*(s.x-r.x)+(s.y-r.y)*(s.y-r.y)>=10&&(n=!0),a=o,o=t.isVertical?s.y:s.x,t.dir===i.right||t.dir===i.up?t.add(a-o+t.startP):t.add(o-a+t.startP)}});var s=function(t,n){return(t=n.convertToNodeSpace(t)).x>=0&&t.x<=n.width&&t.y>=0&&t.y<=n.height},c=function(e){if(!t.isNotNode){var r=e.getLocation();if(n)t.startP<=t.minP||t.startP>=t.maxP?t.checkOut():a+4<o?t.dir===i.down||t.dir===i.left?t.quickMove(1):t.quickMove(-1):o+4<a?t.dir===i.down||t.dir===i.left?t.quickMove(-1):t.quickMove(1):t.checkOut();else if(t.buttonFun)for(var c=t.nodeArr.length-1;c>=0;c--)if(s(r,t.nodeArr[c])){var u=t.nodeArr[c];return void t.buttonFun(u.dylListId,u)}}};this.node.on("touchend",c),this.node.on("touchcancel",c)},setButton:function(){var t=this;this.node.on("touchend",function(n){if(t.buttonFun)for(var e=n.getLocation(),i=t.nodeArr.length-1;i>=0;i--)if(t.nodeArr[i].getBoundingBoxToWorld().contains(e)){var a=t.nodeArr[i];return void t.buttonFun(a.dylListId,a)}})},quickMove:function(t){var n=this,e=-300*t,i=600*t,a=-16e3*t,o=this.startP,r=t>0?this.maxP:this.minP;this.runFun=dyl.update(function(s){return(i+=(o-r)*t>0?(e+=a*s)*s:e*s)*t<=0?(n.runFun=null,n.checkOut(),!1):(o+=i*s,n.add(o),!0)})},quickOut:function(t){var n=this,e=this.startP,i=0;if(null>this.maxP)this.maxP,this.maxP;else if(null<this.minP)this.minP,this.minP;this.runFun=dyl.update(function(a){var o=(i+=a)/time;return o>=1?(n.add(null),n.runFun=null,!1):(o=Math.sqrt(o),n.add(null*o*t+e),!0)})},checkOut:function(){var t=this;if(0!==this.maxId){var n=this.startP,e=null,i=0;if(this.startP<this.minP)e=this.minP;else if(this.minP>this.maxP)e=this.minP;else{if(!(this.startP>this.maxP))return;e=this.maxP}this.runFun=dyl.update(function(a){return i+=a,t.add((e-n)*i/.1+n),!(i>.1&&(t.add(e),t.runFun=null,1))})}},getStartData:function(t){var n=0,e=0,i=0,a=Math.floor(t/this.nodeLen);t=t-a*this.nodeLen,a*=this.poolArr.length;var o=0;for(o=0;o<this.poolArr.length;o++){var r=this.poolArr[o];if(!(t>r.d))break;t-=r.d+this.d,a++}n=t,e=a,t=this.poolArr[o%this.poolArr.length].d-t;for(var s=this.poolArr.length,c=this.len-this.d;t<=c;)o=(o+1)%s,t+=this.poolArr[o].d+this.d,a++;if(i=a+1,this.maxId){i>this.maxId&&(i=this.maxId);var u=this.poolArr.length;for(o=e;o<i&&o<0;o++){var h=o%u;h+=u,h%=u,n-=this.poolArr[h].d+this.d,e++}}return{p:n,sId:e,eId:i}},add:function(t){cc.log("x",t),this.startP=t;var n=this.getStartData(t);this.resetArr(this.startId,this.endId,n.sId,n.eId),this.resetPos(n)},resetPos:function(t){for(var n=-t.p,e=0;e<this.nodeArr.length;e++){var a=this.nodeArr[e],o=.5*a.d+n;this.dir===i.up?a.y=o-.5*this.len:this.dir===i.down?a.y=.5*this.len-o:this.dir===i.right?a.x=o-.5*this.len:a.x=.5*this.len-o,n+=a.d+this.d}},resetArr:function(t,n,e,i){var a=this,o=this.nodeArr;this.nodeArr=[];var r=function(n,e){for(var i=n;i<e;i++)o[i-t].dylDel()},s=function(t,n){for(var e=t;e<n;e++){var i=a.poolArr.add(e);a.nodeArr.push(i),i.dylListId=e,a.addFun&&a.addFun(e,i)}};i<=t||n<=e?(r(t,n),s(e,i)):(r(t,e),r(i,n),s(e,t),function(n,e){for(var i=n;i<e;i++)a.nodeArr.push(o[i-t])}(Math.max(t,e),Math.min(n,i)),s(n,i));for(var c=this.poolArr.length-1;c>=0;c--)this.poolArr[c].dylReset();this.startId=e,this.endId=i},addPool:function(t,n){var e=[],i=[];e.push(t),t.dylDel=function(){e.push(this)},t.d=n,t.active=!0;var a={},o=this.node;return a.add=function(){if(e.length>0)return e.pop();if(i.length>0){var a=i.pop();return a.active=!0,a}var r=cc.instantiate(t);return r.active=!0,o.addChild(r),r.d=n,r.dylDel=function(){e.push(this)},r},a.dylReset=function(){for(var t=e.length-1;t>=0;t--)e[t].active=!1,i.push(e[t]);e.length=0},a}}),cc._RF.pop()},{}],DylMain:[function(t,n,e){"use strict";cc._RF.push(n,"16386x0i1VC7q9eDPwQmRQm","DylMain");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function a(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}function o(t){return Array.isArray(t)?t:Array.from(t)}cc.Enum({Null:0,SmallBig:1,Red:2,Shake:3});cc.Class({extends:cc.Component,editor:{menu:"dyl/\u2622 \u4e3b\u903b\u8f91",executeInEditMode:!0,inspector:"packages://dyl-main/DylMain.js"},properties:{touch:"",isPhysics:{default:!1,displayName:"\u7269\u7406"},isShowDebug:{default:!1,displayName:"\u8c03\u8bd5"},gravity:{default:cc.v2(0,-320),displayName:"\u91cd\u529b"}},_refresh:function(){},__preload:function(){this.myInit()},onEnable:function(){},initPhysics:function(){this.isPhysics&&(cc.director.getPhysicsManager().enabled=!0,cc.director.getCollisionManager().enabled=!0,this.isShowDebug?cc.director.getPhysicsManager().debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_pairBit|cc.PhysicsManager.DrawBits.e_centerOfMassBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit:cc.director.getPhysicsManager().debugDrawFlags=0,cc.director.getPhysicsManager().gravity=this.gravity)},myInit:function(){this.initPhysics(),""!==this.touch&&this.setTouch()},onDestroy:function(){var t=this.__loadData;for(var n in t)cc.loader.releaseRes(n)},setTouch:function(){var t=this.node,n=null;t.button=t.button?t.button:[];var e=function(t,n){for(var e=0;e<n.length;e++){if(n[e].active)if(n[e].getBoundingBoxToWorld().contains(t))return n[e]}return null},r=this.node.touch,s=[];Object.defineProperty(this.node,"touch",{get:function(){return r},set:function(t){if(Array.isArray(t)){var n=o(t);r=n[0],s=n.slice(1)}else r=t,s=[];"string"!=typeof r&&cc.warn("touch\u7684\u72b6\u6001\u5e94\u8be5\u662f\u5b57\u7b26\u4e32\uff0c\u8fd9\u91cc\u5374\u4e0d\u662f",void 0===r?"undefined":i(r),r)}}),this.node.touch||(this.node.touch="touch");var c=this.node.getComponent(this.touch),u=this.node.touch,h=function(n){var i=n.getLocation(),a=cc.v2(t.convertToNodeSpace(i)),o=t.getContentSize(),r=[o.width,o.height],s=r[0],c=r[1],u=[s/2,c/2];return s=u[0],c=u[1],a.subSelf(cc.v2(s,c)),a.in=function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return e(i,n)},a},d=!0,l=function(t,n){if(n&&!0!==n&&!Array.isArray(n))return cc.warn("touch"+t+"return data \u4e0d\u662ftrue\uff0c\u4e0d\u662f\u5426\uff0c\u4e5f\u4e0d\u662f\u6570\u7ec4",r,n);Array.isArray(n)&&(s=n)},f=null,p=0,m=!1;this.node.on("touchstart",function(i){if(n=e(i.getLocation(),t.button))return c.buttonOn&&c.buttonOn(n),!0;if(!t.touch)return d=null,null;u=t.touch;var o=h(i);if(p++,f=o,m=!1,c[t.touch+"LongOn"]||c[t.touch+"LongUp"]||c[t.touch+"LongOut"]||c[t.touch+"LongEnd"]){var r=p;setTimeout(function(){if(r===p){if(u!==t.touch)return null;m=!0,d=!c[t.touch+"LongOn"]||c[t.touch+"LongOn"].apply(c,[f].concat(a(s))),l("on",d)}},500)}d=!c[t.touch+"On"]||c[t.touch+"On"].apply(c,[o].concat(a(s))),l("on",d)}),this.node.on("touchmove",function(e){if(n)return!0;if(!d)return null;if(u!==t.touch)return null;var i=h(e);f=i,d=!c[t.touch+"Move"]||c[t.touch+"Move"].apply(c,[i].concat(a(s))),l("move",d)},this),this.node.on("touchend",function(e){if(n)return c.buttonEnd?c.buttonEnd(n):c.buttonUp&&c.buttonUp(n),!0;if(p++,!d)return null;if(u!==t.touch)return null;var i=h(e);return c[t.touch+"LongEnd"]&&m?(d=c[t.touch+"LongEnd"].apply(c,[i].concat(a(s))),void l("longEnd",d)):c[t.touch+"LongUp"]&&m?(d=c[t.touch+"LongUp"].apply(c,[i].concat(a(s))),void l("longUp",d)):c[t.touch+"End"]?(d=c[t.touch+"End"].apply(c,[i].concat(a(s))),void l("end",d)):void(c[t.touch+"Up"]?(d=c[t.touch+"Up"].apply(c,[i].concat(a(s))),l("up",d)):d=!0)},this),this.node.on("touchcancel",function(e){if(n)return c.buttonEnd?c.buttonEnd(n):c.buttonOut&&c.buttonOut(n),!0;if(p++,!d)return null;if(u!==t.touch)return null;var i=h(e);return c[t.touch+"LongEnd"]&&m?(d=c[t.touch+"LongEnd"].apply(c,[i].concat(a(s))),void l("longEnd",d)):c[t.touch+"LongOut"]&&m?(d=c[t.touch+"LongOut"].apply(c,[i].concat(a(s))),void l("longOut",d)):c[t.touch+"End"]?(d=c[t.touch+"End"].apply(c,[i].concat(a(s))),void l("end",d)):void(c[t.touch+"Out"]?(d=c[t.touch+"Out"].apply(c,[i].concat(a(s))),l("out",d)):d=!0)},this)},setRun:function(){var t=this;this.node.run=function(){for(var n=function(){},e=arguments[0],i=function(t,n){return function(){t(),n()}},a=function(n,e){return function(){t.node.js[n](),e()}},o=function(t,n){return function(){var e=t;e.push(function(){return null});for(var i=e.length,a=0;a<e.length;a++)u(e[a],function(){--i<=0&&n()})()}},r=function(t,n){return function(){var e=t.node;e.node&&(e=e.node),t.add&&t.add>0?t.easing(cc.easeIn(t.add)):t.add&&t.add<0&&(cc.easeInOut(-t.add),t.easing(cc.easeInOut(-t.add)));var i=cc.callFunc(function(){n()}),a=cc.sequence(t,i);e.runAction(a)}},s=function(t,n){return function(){var i=e;i.node&&(i=i.node),t.add&&t.add>0?t.easing(cc.easeIn(t.add)):t.add&&t.add<0&&(cc.easeInOut(-t.add),t.easing(cc.easeInOut(-t.add)));var a=cc.callFunc(n),o=cc.sequence(t,a);i.runAction(o)}},c=function(t,n){return function(){var i=e;i.node&&(i=i.node);var a=cc.delayTime(t),o=cc.callFunc(n),r=cc.sequence(a,o);i.runAction(r)}},u=function(t,n){return"function"==typeof t?i(t,n):"number"==typeof t?c(t,n):"string"==typeof t?a(t,n):Array.isArray(t)?o(t,n):t.node?r(t,n):s(t,n)},h=arguments.length-1;h>0;h--){var d=arguments[h];n=u(d,n)}n()}},setRand:function(){var t=this.rand;this.node.rand=function(n){var e=(t=(30853*t+253)%4671341)/4671341;return n?Math.floor(e*n):e},this.node.rand.set=function(n){t=n}}}),cc._RF.pop()},{}],DylPool:[function(t,n,e){"use strict";cc._RF.push(n,"34f084lYpFNQo1fsLe3Vr4s","DylPool");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function a(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}cc.Class({extends:cc.Component,editor:{menu:"dyl/\u2668 \u5bf9\u8c61\u6c60"},properties:{isEffect:!1},logPath:function(t){var n="";(function t(e){e&&(n=e.name+" "+n,t(e.parent))})(this.node),cc.log(n)},__preload:function(){for(var t=this.node._components,n=0;n<t.length;n++)if(t[n]===this){t.splice(n,1);break}this.preInit(),this.initPool()},preInit:function(){for(var t=[].concat(a(this.node.getChildren())),n=0;n<t.length;n++)t[n].parent=this.node.parent;var e=cc.v2(this.node);this.node.setPosition(cc.v2(0,0));var i=cc.instantiate(this.node);i.dylSpriteNodeName=i.name,i.name="tmp";for(var o=[].concat(a(this.node._components)),r=o.length-1;r>=0;r--)o[r].destroy();for(var s=0;s<t.length;s++)t[s].parent=i;i.setPosition(this.node),this.node.setPosition(e),i.parent=this.node},myPlay:function(t,n){for(var e=[t].concat(a(t.getChildren())),i=dyl.counter(function(){return t.del()},e.length),o=0;o<e.length;o++)this.playNode(e[o],n,i)},setColor:function(t,n){if(null!==n)for(var e=[t].concat(a(t.getChildren())),i=e.length-1;i>=0;i--)e[i].color=n},playNode:function(t,n,e){return t.getComponent(cc.ParticleSystem)?this.playParticleSystem(t,e):t.getComponent(cc.Animation)?this.playAnimation(t,e):t.getComponent(cc.Label)?this.playLabel(t,n,e):void e()},playAnimation:function(t,n){var e=t.getComponent(cc.Animation);if(e.on("finished",function t(){e.off("finished",t),n()}),!e.defaultClip)return cc.error("\u53ea\u80fd\u8fd0\u884c\u9ed8\u8ba4\u52a8\u753b\uff0c\u8fd9\u91cc\u6ca1\u6709",t.name);e.play()},playLabel:function(t,n,e){t.getComponent(cc.Label).string=String(n);var i=Number(n);if(i<0)t.color=cc.color(255,10,10);else{if(!(i>0))return t.opacity=0,e();t.color=cc.color(10,255,10)}t.setPosition(cc.v2(0,0)),t.opacity=255;tz(t,[!0,.5,cc.v2(0,200),!1,"opacity",0],e)},playParticleSystem:function(t,n){var e=t.getComponent(cc.ParticleSystem);e.resetSystem();var i=e.duration+e.life+e.lifeVar;tz(i,n)},resetDylNode:function(t,n){var e=t.getComponent(n);e&&e.__preload()},initPool:function(){var t=this,n=this.node.getChildren()[0];this.resetDylNode(n,"DylLab"),n.active=!1;var e=[],a=[];a.push(n),this.isEffect?n.del=function(){this.active=!1,a.push(this);var t=this.__poolId;e[t]=e[e.length-1],e[t].__poolId=t,e.length=e.length-1,this.__poolId=null}:n.del=function(){this.active=!1,a.push(this);var t=e.indexOf(this);if(-1===t)return cc.error("\u8fd9\u4e2a\u8282\u70b9\u5df2\u7ecf\u88ab\u5220\u9664\u4e86\uff0c\u4e0d\u80fd\u518d\u5220\u9664",this.name,t,e,this);e.splice(t,1),e[this.name]===this&&(e[this.name]=null)};var o=this;this.isEffect?this.node.add=function(){for(var n=null,r=null,s=null,c=arguments.length,u=Array(c),h=0;h<c;h++)u[h]=arguments[h];for(var d=u.length-1;d>=0;d--){var l=u[d],f=void 0===l?"undefined":i(l);"string"!==f&&"number"!==f?"cc.Vec2"!==(f=cc.js.getClassName(l))&&"cc.Node"!==f?"cc.Color"!==f||(s=l):n=l:r=l}var p=null;return a.length<1?((p=cc.instantiate(e[0])).parent=this,p.del=function(){this.active=!1,a.push(this);var t=this.__poolId;e[t]=e[e.length-1],e[t].__poolId=t,e.length=e.length-1,this.__poolId=null}):(p=a[a.length-1],a.length=a.length-1,p.active=!0),t.resetDylNode(p,"DylLab"),p.__poolId=e.length,e.push(p),null===n?cc.warn("\u4f4d\u7f6e\u6ca1\u6709\u8bbe\u7f6e"):(p.setPosition(n),o.setColor(p,s),o.myPlay(p,r),p)}:this.node.add=function(n){var i=null;return a.length<1?((i=cc.instantiate(e[0])).parent=this,i.del=function(){this.active=!1,a.push(this);var t=e.indexOf(this);if(-1===t)return cc.error("\u8fd9\u4e2a\u8282\u70b9\u5df2\u7ecf\u88ab\u5220\u9664\u4e86\uff0c\u4e0d\u80fd\u518d\u5220\u9664",this.name,t,e,this);e.splice(t,1),e[this.name]===this&&(e[this.name]=null)}):(i=a[a.length-1],a.length=a.length-1,i.active=!0),t.resetDylNode(i,"DylLab"),e.push(i),void 0!==n&&(i.name=n,e[n]=i),i},this.node.pool=e}}),cc._RF.pop()},{}],DylTileMap:[function(t,n,e){"use strict";cc._RF.push(n,"7b877KCI9xM9Iv8hDcLvFg0","DylTileMap"),cc.Class({extends:cc.Component,editor:{menu:"dyl/\u25a6 \u74e6\u5757\u5730\u56fe",inspector:"packages://dyl-nowshow/DylNotshow.js"},properties:{},__preload:function(){this.initTileMap()},initTileMap:function(){var t=this.node.getComponent(cc.TiledMap),n=t.getMapSize(),e=t.getTileSize().width;this.node.map=dyl.addMap(n.width,n.height),this.node.posMap=dyl.addMapLayer(n.width,n.height,e),this.node.add=function(i,a){var o=node.getChildByName(i).getComponent(cc.TiledLayer);if(o){for(var r=o.getLayerSize(),s=o.getMapTileSize().width,c=r.width-1;c>=0;c--)for(var u=r.height-1;u>=0;u--){var h=o.getTileGIDAt(c,r.height-u-1);a(cc.v2(c,u),h)}return map.d=s,map}for(var d=(o=t.getObjectGroup(i)).getObjects(),l=d.length-1;l>=0;l--){var f=d[l].x/e,p=d[l].y/e;a(cc.v2(f,n.height-p-1),d[l].name)}}}}),cc._RF.pop()},{}],DylWindow:[function(t,n,e){"use strict";function i(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}cc._RF.push(n,"f1099pPj+FP3oIXYJMx8XLx","DylWindow");var a=cc.Class({name:"NodeData",properties:{id:"",node:cc.Node,p:cc.v2(0,0),rotation:0,scaleX:1,scaleY:1,anchorX:.5,anchorY:.5,height:0,width:0,color:cc.color(255,255,255),opacity:255,skewX:0,skewY:0,active:!0,lab:""}}),o=cc.Class({name:"NodeDataArr",properties:{arr:[a]}});cc.Class({extends:cc.Component,editor:{menu:"dyl/\u2603 \u5f39\u7a97",executeInEditMode:!0,inspector:"packages://dyl-window/DylWindow.js"},ctor:function(){Object.defineProperty(this,"node",{get:function(){},set:function(t){delete this.node,this.node=t,this._myInit()},configurable:!0})},properties:{defaultData:{default:null,type:o},data:{default:[],type:o,visible:!1},showData:"default",_stateArr:{default:[],type:cc.String},stateArr:{default:[],type:cc.String}},_myInit:function(){var t=this;this.node.add=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return t.addFun(n,e)},this.node.del=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return t.delFun(n)}},getAction:function(t,n,e){if(!e.node.active)return[];var i=0,a=function(t){i=i>t?i:t},o=function(t,i){a(.4*Math.abs(e[t]-n[t])/i)};if(a(.4*e.p.sub(n.p).mag()/540),o("rotation",60),o("scaleX",.7),o("scaleY",.7),o("opacity",150),i<1e-4)return[];t.moveTo(e.node,i,e.p).rotateTo(e.node,i,e.rotation).scaleTo(e.node,i,e.scaleX,e.scaleY).fadeTo(e.node,i,e.opacity)},notActChange:function(t){for(var n=t.length-1;n>=0;n--){var e=t[n],i=e.node,a=e.anchorX,o=e.anchorY,r=e.height,s=e.width,c=e.color,u=e.skewX,h=e.skewY,d=e.active,l=e.lab;i.active=d,i.anchorX=a,i.anchorY=o,i.height=r,i.width=s,i.color=c,i.skewX=u,i.skewY=h,i.getComponent(cc.Label)&&(i.getComponent(cc.Label).string=l)}},addFun:function(t,n){if(t?this.showData=t:t=this.showData,"default"===t)return this._read("default");this._read(String(t)),n()},delFun:function(t){var n=this;if(this.node.active){if("default"===this.showData)return this.node.active=!1;var e=this.data[this.stateArr.indexOf(this.showData)].arr,i=tz();i._();for(var a=e.length-1;a>=0;a--)this.getAction(i,e[a],this.defaultData.arr[a]);i._()(function(){n.node.active=!1,t()})()}else t()},myAct:function(t){var n=this;if(t){this.node.active=!0;var e=this.node.scale,i=this.node.opacity,a=t>0?2:1,o=t>0?0:1,r=this.node;r.stopAllActions(),r.setScale(e*a),r.opacity=i*o;var s=cc.fadeTo(Math.abs(t),i*(1-o)),c=cc.scaleTo(Math.abs(t),e*(3-a)),u=cc.callFunc(function(){n.node.opacity=i,n.node.setScale(e),n.node.active=t>0}),h=cc.sequence(cc.spawn(s,c),u);r.runAction(h)}},_getString:function(t){return t.replace(/\s+/g,"")},_read:function(t){var n=null;if("default"===t)n=this.defaultData.arr;else for(var e=this.stateArr.length-1;e>=0;e--)this.stateArr[e]===t&&(n=this.data[e].arr);for(var i=n.length-1;i>=0;i--)if(n[i].node){var a=n[i].node,o=n[i];a.setPosition(o.p),a.rotation=o.rotation,a.scaleX=o.scaleX,a.scaleY=o.scaleY,a.anchorX=o.anchorX,a.anchorY=o.anchorY,a.color=o.color,a.opacity=o.opacity,a.skewX=o.skewX,a.skewY=o.skewY;var r=a.getComponent(cc.Label);if(r&&(r.string=o.lab),"Canvas"===a.name)this.node.getComponent(cc.Canvas).designResolution=cc.size(o.width,o.height);else a.height=o.height,a.width=o.width;a.active=o.active}},buttonSave:function(t){if("default"!==t)for(var n=this.stateArr.length-1;n>=0;n--)this.stateArr[n]===t&&(this.data[n]=this._getSaveData());else this.defaultData=this._getSaveData()},_save:function(t,n,e){if(this.stateArr[t]=n,"default"===n)return this.defaultData=this._getSaveData(),void(this.stateArr[t]="");this.data[t]=this._getSaveData(),""===n&&(this.stateArr[t]=e);for(var i=this.stateArr.length-1;i>=0;i--)if(this.stateArr[i]===this.stateArr[t]&&i!==t)return void(this.stateArr[t]="")},_getSaveData:function(){var t=new o;return t.arr=this._getSaveNodeArr(this.node),t},_getSaveNodeArr:function(t){for(var n=[this._addNodeData(t)],e=t.getChildren(),a=e.length-1;a>=0;a--)n.push.apply(n,i(this._getSaveNodeArr(e[a])));return n},_addNodeData:function(t){var n=new a;n.id=t.name,n.node=t,n.p=cc.v2(t),n.rotation=t.rotation,n.scaleX=t.scaleX,n.scaleY=t.scaleY,n.anchorX=t.anchorX,n.anchorY=t.anchorY,n.height=t.height,n.width=t.width,n.color=t.color,n.opacity=t.opacity,n.skewX=t.skewX,n.skewY=t.skewY,n.active=t.active;var e=t.getComponent(cc.Label);return e&&(n.lab=e.string),n},onLoad:function(){this.node.on("touchstart",function(){return null})}}),cc._RF.pop()},{}],DylWuli:[function(t,n,e){"use strict";cc._RF.push(n,"74127pcqJhKea7hsJnefXpC","DylWuli"),cc.Class({extends:cc.Component,editor:{menu:"dyl/\u2604 \u7269\u7406",executeInEditMode:!0,inspector:"packages://dyl-nowshow/DylNotshow.js"},properties:{collisionFun:{default:function(){return new cc.Component.EventHandler},type:cc.Component.EventHandler}},__preload:function(){var t=this.node.getComponent(cc.RigidBody);Object.defineProperty(this.node,"v",{get:function(){return t.linearVelocity},set:function(n){t.linearVelocity=n}}),Object.defineProperty(this.node,"f",{get:function(){return t.linearDamping},set:function(n){t.linearDamping=n}}),Object.defineProperty(this.node,"a",{set:function(n){t.applyForceToCenter(n)}}),t.fixedRotation=!0,t.enabledContactListener=!0,""!==this.collisionFun.handler&&(this.collisionComponent=this.collisionFun.target.getComponent(this.collisionFun.component))},onEnable:function(){0},onBeginContact:function(t,n,e){this.collisionComponent&&(t.disabled=this.collisionComponent[this.collisionFun.handler](e.node))}}),cc._RF.pop()},{}],Fun:[function(t,n,e){"use strict";function i(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}function a(t){return Array.isArray(t)?t:Array.from(t)}cc._RF.push(n,"00866FoTEhAEKueO8NyaucG","Fun"),window.zt={},zt.setSkill=function(t,n){dyl.data("skill."+n,t),hjm[n]=t.skill},zt.setRole=function(t,n){t.atk=n.atk,t.hp=n.hp,zt.setSkill(t,n.skillName),t.skillName=n.skillName,t.father=t.parent},zt.addRunFun=function(){for(var t=[],n=0,e=function(){var e=t[n++];e&&e()},o=arguments.length,r=Array(o),s=0;s<o;s++)r[s]=arguments[s];for(var c=function(n){if("function"==typeof r[n]){var o=r[n];return t.push(function(){o(e)}),"continue"}var s=a(r[n]),c=s[0],u=s[1],h=s.slice(2);t.push(function(){c[u].apply(c,[e].concat(i(h)))})},u=0;u<r.length;u++)c(u);return e},cc._RF.pop()},{}],GameInit:[function(t,n,e){"use strict";cc._RF.push(n,"bc1c5Prl9FKerNSrudJpywQ","GameInit"),cc.Class({extends:cc.Component,properties:{},mainFun:function(){hjm._num.lab=hjm.data.num;var t=hjm.data.myRoleArr;this.addRoleArr(hjm._me,t,function(t,n){var e=n.name;hjm[e]=t.me,t.type=1,t.atkAdd=0,t.skillData={},zt.setRole(t,n)}),this.addRoleArr(hjm._null,ai.w*ai.h-t.length-1,function(t){t.father=t.parent,t.skillData={},t.type=0})},settingFun:function(){this.startActDelay=!1},initAi:function(){ai.buffArr=[],ai.enTypeIdArr=[],ai.bossTypeIdArr=[],hjm.isNew&&(hjm.isNew=!1,hjm.enTypeId=dyl.rand(571)),dyl.setRand(hjm.enTypeId);for(var t=0;t<80;t++)dyl.rand()>.5?ai.enTypeIdArr.push(0):ai.enTypeIdArr.push(1e3);ai.enTypeIdArr[4]=0,ai.enTypeIdArr[10]=0;for(var n=0;n<20;n++)dyl.rand()>.5?ai.bossTypeIdArr.push(0):ai.bossTypeIdArr.push(1);for(var e=[],i=0;i<ai.skillNameArr.length;i++){var a={num:50*i+dyl.rand(200),name:ai.skillNameArr[i]};e.push(a)}for(var o=e.length-1;o>=0;o--)for(var r=e[o].num,s=o-1;s>=0;s--){var c=e[s].num;if(c>r){r=c;var u=e[s];e[s]=e[o],e[o]=u}}ai.skillNameArr=[];for(var h=0;h<e.length;h++)ai.skillNameArr.push(e[h].name);ai.cardNameArr=["mobility","moreRun","twoAtkAdd","enAtk0","devourAtk","resetRun","affray","juedou","stoneMan","yidong"],dyl.rand(ai.cardNameArr),ai.cardNameArr.length=4;var d=Math.floor(9987617*Math.random());dyl.setRand(d),0===hjm.data.levelId&&dyl.setRand(hjm.data.levelId+34),ai.w=3,ai.h=3,ai.d=290,ai.colorArr=[],ai.colorArr[1]=cc.color(188,152,135),ai.colorArr[-1]=cc.color(90,138,143),ai.colorArr[0]=cc.color(27,27,27),ai.nullPos=null,ai.map=null,ai.posMap=null,ai.isNotBuff=!1,ai.cardArr=[],this.addCardArr(),ai.touchCard=null,ai.cardSkill=this.node.getComponent("CardSkill");var l=tz();ai.tip=function(t){l(null),hjm._tip=[!0],hjm._tip.lab=t,l=tz(.75,function(){hjm._tip=[!1]})}},addCard_NotSetPos:function(t,n){var e=hjm._card.add(t);return dyl.data("card."+t,e),hjm[t]=e.card,e.name=t,ai.cardArr.push(e),e.x=1e3,e},resetCardPos:function(){var t=ai.cardArr;if(!(t.length<1)){var n=.5*(1-t.length)*168,e=t[0].y;tz(t,[1,cc.v2(n,e),cc.v2(168,0)])}},addCardArr:function(){var t=ai.cardNameArr;t.length=4;for(var n=0;n<t.length;n++){var e=t[n];this.addCard_NotSetPos(e)}this.resetCardPos()},addRoleArr:function(t,n,e,i){if("number"==typeof n)for(var a=0;a<n;a++){var o=t.add();e&&e(o),o._dylStartActName=i,this.mapArr.push(o)}else for(var r=0;r<n.length;r++){var s=n[r],c="";c="string"==typeof s?s:s.name;var u=t.add(c);e(u,s),u._dylStartActName=i,this.mapArr.push(u)}},initMapArr:function(){for(var t=ai.w*ai.h,n=this.mapArr.length;n<t;n++)this.mapArr.push(null);cc.log("-------------------"),dyl.rand(this.mapArr)},startAct:function(t,n,e){var i=this,a=null;if("scale"===t){for(var o=0;o<n.length;o++)n[o].setScale(0),n[o].active=!1;a=function(t,n){t.active=!0;tz(t,[.6,[1,1]],function(){return n()})}}if(!0===this.startActDelay){var r=0;(function t(){var i=n[r++];if(!i)return e();a(i,t)})()}else if(this.startActDelay)"number"==typeof this.startActDelay&&function(){var t=dyl.counter(e);t(n.length);for(var o=function(e){var o=n[e];tz(i.startActDelay,function(){return a(o,function(){return t()})})},r=0;r<n.length;r++)o(r)}();else{var s=dyl.counter(e);s(n.length);for(var c=0;c<n.length;c++)a(n[c],s)}},initMap:function(){var t=this,n={},e=dyl.addMapLayer(ai.w,ai.h,ai.d),i=0,a=dyl.addMap(ai.w,ai.h,function(a){var o=t.mapArr[i++];if(o instanceof cc.Node){if(o.setPosition(e.get(a)),o._dylStartActName){var r=o._dylStartActName;n[r]||(n[r]=[]),n[r].push(o)}}else null===o&&(ai.nullPos=a);return o});ai.posMap=e,ai.map=a;var o=dyl.counter(function(){t.startGame()});for(var r in o(1),n)o(1),this.startAct(r,n[r],o);o()},startGame:function(){this.node.getComponent("GameMain").startGame()},start:function(){this.initAi(),this.settingFun(),this.mapArr=[],this.mainFun(),this.initMapArr(),this.initMap()}}),cc._RF.pop()},{}],GameMain:[function(t,n,e){"use strict";function i(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}cc._RF.push(n,"e15ddDh+TNOjqsgCosz08e2","GameMain"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=this;ai.gameMain=this,tz(function(n){var e=t.node.opacity+5*n;return e>255?(t.node.opacity=255,1):(t.node.opacity=e,-1)}),hjm.isTeach||0===hjm.data.levelId&&(hjm.data.levelId=1),this.levelId=hjm.data.levelId,ai.rewardId=3*hjm.data.levelId-3,ai.rewardId<0&&(ai.rewardId=0),this.Skill=this.node.getComponent("Skill"),this.touchId=0,this.end=null,this.teachId=0,hjm.isTeach&&(this.teachId=1),dyl.button(this,hjm._button),dyl.button(this,hjm._sure),dyl.button(this,hjm._lose),dyl.button(this,hjm._win),dyl.button(this,hjm._revive),this.logStr=""},myLog:function(t){this.logStr=t+this.logStr,hjm._test.lab=this.logStr},teachOn:function(t,n){if(hjm._teach.touch.active)return cc.log("in",t.in(hjm._teach.touch)),t.in(hjm._teach.touch)?(hjm._teach.add("0"),this.teachId++,this.meOn(t,n)):void 0;this.teachId++,hjm._teach.add(""+this.teachId)},teachEnd:function(t,n,e){return this.node.touch=["me",n],this.meEnd(t,n,e)},teach:function(t){hjm.isTeach?(this.node.touch=["teach",t],hjm._teach.add(""+this.teachId)):t()},startGame:function(){this.war()},war:function(){var t=this;cc.log("war"),hjm._level.lab=this.levelId,hjm._buff.skill=!1,hjm._buff.spr=!0,hjm._buff.sprBg=!0;var n=function(t){hjm._round.lab--,t()},e=function(n){t.nowRole.notRun=!0,n()};hjm.isTeach&&hjm._teach.add("teach");var i=["addEn",1,"me","changeTurn","myPreRound","myPreRoundBuff","checkDie","myPreTurn","checkDie",2,"newBuff","teach",3,"addTouch","meEndRun","meEndTurn","en","changeTurn","enPreTurn","checkDie","newBuff","getEnAtkPos",n,"moveRole","addBuff","checkDie","attack","endMove","checkDie",e,"newBuff","getEnAtkPos",n,"moveRole","addBuff","checkDie","attack","endMove","checkDie",e,"newBuff","getEnAtkPos",n,"moveRole","addBuff","checkDie","attack","endMove","checkDie",e,"enEndTurn",-1];dyl.process(this,i,!0)},myRunAttack:function(t){hjm._round.lab--,t(this,"moveRole"),t(this,"addBuff"),t(this,"checkDie"),t(this,"attack"),t(this,"endMove"),t(this,"checkDie"),t(this,"myRunAttack_fun1"),t()},myRunAttack_fun1:function(t){this.nowRole.notRun=!0,t()},meEndRun:function(t){hjm._round.lab<1?t():ai.isNotBuff?(ai.isNotBuff=!1,t(3)):t(2)},meEndTurn:function(t){var n=this;ai.map.find(function(t){t&&1===t.type&&n.addAtkAdd(t,-t.atkAdd)}),t()},enEndTurn:function(t){var n=this;ai.map.find(function(t){t&&-1===t.type&&n.addAtkAdd(t,-t.atkAdd)}),t()},enPreTurn:function(t){ai.map.find(function(n,e){n&&-1===n.type&&n.preTurnName&&t("Skill",n.preTurnName,n,e)}),t()},myPreTurn:function(t){ai.map.find(function(n,e){n&&1===n.type&&n.preTurnName&&t("Skill",n.preTurnName,n,e)}),t()},reward:function(){var t=this;if(ai.touchCard&&this.delCardTouch(function(){return null}),hjm.isTeach)return hjm.isTeach=!1,this.levelId=1,hjm.data.levelId=1,this.meEndTurn(function(){return null}),void this.war();hjm._buff.skill=!0,hjm._buff.spr=!1,hjm._buff.sprBg=!1,ai.map.find(function(t){t&&(t.notRun=!1)});var n=["newReward","addRewardTouch","moveRole","addReward"],e=["meEndTurn","meEndTurnBuff","rewardWarn"].concat(n,n,n,[function(n){t.saveFun(),n()},"war"]);dyl.process(this,e,!0)},myPreRoundBuff:function(t){this.runState(t,"myPreRoundBuff")},meEndTurnBuff:function(t){this.runState(t,"meEndTurnBuff")},checkDie:function(t){var n=this;if(!ai.map.find(function(e,i){if(e&&e.type&&e.hp<=0)return n.Skill.die(function(){return n.checkDie(t)},e,i),!0})){var e=ai.map.find("type",1),i=ai.map.find("type",-1);return e?i?void t():(cc.log("\u8d62\u4e86"),void this.reward()):(cc.log("\u8f93\u4e86"),this.end=t,void tz(.5,hjm._lose,"active",!0))}},me:function(t){this.myLog("me"),this.turn=1,t()},en:function(t){this.turn=-1,t()},warnFun:function(t,n){var e=hjm._roundAct;e.lab=n,e.spr=[1,0];e.getChildByName("lab");tz(.3,e,"active",!0,[e.spr,.4,[1,1]],.4,function(){return e.active=!1,t()})},changeTurn:function(t){return hjm._round.lab=3,hjm._round.spr=ai.colorArr[this.turn],ai.map.find(function(t){t&&(t.notRun=!1)}),this.turn>0?this.warnFun(t,"\u6211\u65b9\u56de\u5408"):this.warnFun(t,"\u654c\u65b9\u56de\u5408")},rewardWarn:function(t){return this.warnFun(t,"\u5956\u52b1\u65f6\u95f4")},addReward:function(t){var n=this;hjm._show=[!1];var e=ai.buffData;if("save"===e)return 1===this.nowRole.type?(this.saveFun(),this.warnFun(t,"\u4fdd\u5b58\u6210\u529f")):void t();if(e.power)return hjm._num.lab+=e.power,void t();var i=function(t){e[t]&&(n.nowRole[t]+=e[t])},a=function(t){if(e["_"+t]){var n=e["_"+t];ai.map.find(function(e){e&&e.type&&(e[t]+=n)})}};this.nowRole.type&&(i("atk"),i("hp"),a("atk"),a("hp"),e.skill&&(this.nowRole.skillData={},zt.setSkill(this.nowRole,e.skill),this.nowRole.skillName=e.skill)),t()},newReward:function(t){if(hjm._show=[!1],hjm._buff.spr1=!0,this.levelId>=44)return this.node.touch="endGame",void tz(hjm._win,.5,"active",!0);var n={},e=ai.rewardArr[ai.rewardId++];for(var i in e)n[i]=e[i];ai.buffData=n;var a="",o=function(t,n){return void 0===n?"\u6280\u80fd: "+t+"\n":n>0?t+" +"+n+"\n":n<0?t+" "+n+"\n":""},r=function(){return dyl.rand(3)-1};for(var s in n)"atk"===s?(n[s]+=r(),a+=o("\u653b\u51fb",n[s])):"hp"===s?(n[s]+=r(),a+=o("\u8840\u91cf",n[s])):"_atk"===s?a+=o("\u5168\u4f53\u653b\u51fb",n[s]):"_hp"===s?(n[s]+=r(),a+=o("\u5168\u4f53\u8840\u91cf",n[s])):a+="power"===s?o("\u80fd\u91cf",n[s]):o(n[s]);a=a.substring(0,a.length-1),hjm._buff.lab=a,hjm._buff.setPosition(ai.posMap.get(ai.nullPos)),"number"==typeof n.skill?(n.skill=ai.skillNameArr[n.skill],this.setBuffState("skill"),hjm[n.skill]=hjm._buff.skill,hjm._show=[!0],dyl.data("skill."+n.skill,hjm._show),hjm._show.sprBg=!1,hjm._show.bg=ai.colorArr[0],hjm[n.skill]=hjm._show.skill,hjm._show.spr=cc.color(200,200,200)):n.save?(this.setBuffState("save"),hjm._show=[!0],hjm._show.show="\u8fd9\u4e2a\u662f\u5b58\u6863\uff0c\u5982\u679c\u53ea\u6709\u82f1\u96c4\u8d70\u5230\u8fd9\u91cc\u5c31\u76f8\u5f53\u4e8e\u5b58\u6863\uff0c\u5982\u679c\u662f\u5176\u4ed6\u65b9\u5757\u8d70\u5230\u8fd9\u91cc\uff0c\u90a3\u5c31\u4ee3\u8868\u53d6\u6d88\u5b58\u6863",hjm._show.sprBg=!1,hjm._show.bg=ai.colorArr[0],hjm._show.spr=hjm._buff.save,hjm._show.spr=cc.color(200,200,200)):this.setBuffState("num"),t()},save:function(t){hjm._show=[!0],hjm._buff.spr1=!0,ai.buffData="save",hjm._buff.setPosition(ai.posMap.get(ai.nullPos)),this.setBuffState("save"),hjm._show=[!0],hjm._show.show="\u8fd9\u4e2a\u662f\u5b58\u6863\uff0c\u5982\u679c\u53ea\u6709\u82f1\u96c4\u8d70\u5230\u8fd9\u91cc\u5c31\u76f8\u5f53\u4e8e\u5b58\u6863\uff0c\u5982\u679c\u662f\u5176\u4ed6\u65b9\u5757\u8d70\u5230\u8fd9\u91cc\uff0c\u90a3\u5c31\u4ee3\u8868\u53d6\u6d88\u5b58\u6863",hjm._show.sprBg=!1,hjm._show.bg=ai.colorArr[0],hjm._show.spr=hjm._buff.save,hjm._show.spr=cc.color(200,200,200),t()},saveFun:function(){var t=[];ai.map.find(function(n){if(n&&1===n.type){var e={};dyl.data(n,e,["name","atk","hp","skillName"]),cc.log("saveHero",e),t.push(e)}}),this.levelId++,hjm.data={levelId:this.levelId,myRoleArr:t,num:hjm._num.lab}},setBuffState:function(t){"skill"===t?(hjm._buff=[!0],hjm._buff.lab=!1,hjm._buff.skill=!0,hjm._buff.save=!1):"save"===t?(hjm._buff=[!0],hjm._buff.lab=!1,hjm._buff.skill=!1,hjm._buff.save=!0):"num"===t?(hjm._buff=[!0],hjm._buff.lab=!0,hjm._buff.skill=!1,hjm._buff.save=!1):t||(hjm._buff=[!1])},myPreRound:function(t){for(var n=0;n<ai.cardArr.length;n++){var e=ai.cardArr[n];e.preTurn&&ai.cardSkill[e.preTurn]()}t()},newBuff:function(t){hjm._buff=[!0];var n=function(t){return t[dyl.rand(t.length)]},e=n([-1,0,-2,1,2,0,0,0,0,0]),i=n([1,0,2,0,1,0,0]);ai.buffData={hp:e,atk:i};var a="",o=function(t,n){return n>0?t+" +"+n:n<0?t+" "+n:""};e&&i?(this.setBuffState("num"),a=o("\u653b\u51fb",i)+"\n"+o("\u8840\u91cf",e)):e?(this.setBuffState("num"),a=o("\u8840\u91cf",e)):i?(this.setBuffState("num"),a=o("\u653b\u51fb",i)):(this.setBuffState(!1),a=""),hjm._buff.lab=a,hjm._buff.setPosition(ai.posMap.get(ai.nullPos)),hjm._buff.spr=""!==a,hjm._buff.spr1=!1,t()},addTouch:function(t){if(hjm.isTeach)return t();this.node.touch=["me",t]},addRewardTouch:function(t){this.node.touch=["reward",t]},rewardOn:function(t,n){var e=ai.posMap.find(t);ai.map.get(e)&&(this.runPos=e,this.node.touch="stop",n())},meOn:function(t,n){var e=this;cc.log("meOn",t,n),this.touchId++;var i=this.touchId;return tz(.4,function(){i===e.touchId&&(cc.log("show"),e.touchId++,e.show(t))}),[n,i]},meEnd:function(t,n,e){if(cc.log("meEnd"),hjm._show.active=!1,this.touchId===e)return cc.log("move"),this.touchId++,this.meTouchAtk(t,n)},meTouchAtk:function(t,n){var e=ai.posMap.find(t),a=ai.map.get(e);if(a){if(ai.touchCard)return hjm._num.lab-=ai.touchCard.num,void ai.cardSkill[ai.touchCard.oneFunName](n,e);if(!0===a.notRun.active)return;return this.runPos=e,this.node.touch="stop",void this.myRunAttack(n)}var o=t.in.apply(t,i(ai.cardArr));o&&(ai.touchCard===o?(ai.touchCard=null,this.setTouchCardAct(o,!1)):(ai.touchCard&&(this.setTouchCardAct(ai.touchCard,!1),ai.touchCard=null),hjm._num.lab>=o.num?(ai.touchCard=o,this.setTouchCardAct(o,!0),ai.touchCard.funName&&(hjm._num.lab-=o.num,this.node.touch="stop",n(ai.cardSkill,ai.touchCard.funName),n(this,"delCardTouch"),n())):ai.tip("\u80fd\u91cf\u4e0d\u8db3")))},delCardTouch:function(t){this.setTouchCardAct(ai.touchCard,!1),ai.touchCard=null,t()},setTouchCardAct:function(t,n){n?(hjm._cardChoose=[!0],hjm._cardChoose.x=t.x,t.card=cc.color(255,255,255),this.showCard(t)):(hjm._cardChoose=[!1],t.card=cc.color(172,172,172))},moveRole:function(t){var n=this.runPos;this.nowRole=ai.map.get(n),this.nowPos=ai.nullPos;var e=n,i=ai.nullPos,a=ai.map.get(e),o=ai.posMap.get(i);ai.map.set(e,i),ai.nullPos=e;var r=i.sub(e),s=r.x,c=r.y,u=.18*Math.sqrt(s*s+c*c);a.parent=hjm._top;var h=ai.posMap.get(e),d=o.add(h).mul(.5);tz(a,[.1,[1.1,1.1]],[.1,[1,1]],[.5*u,[1.2,1.2],d],[.5*u,[1,1],o],function(){return t()})},addAtkAdd:function(t,n){t.atk+=n,t.atk<0&&(n-=t.atk,t.atk=0),t.atkAdd+=n,t.atkAdd>0?t.atk=cc.color(14,179,21):0===t.atkAdd?t.atk=cc.color(0,0,0):t.atk=cc.color(248,50,50)},addBuff:function(t){var n=ai.buffData,e=n.atk,i=n.hp;this.nowRole.type===this.turn&&this.addAtkAdd(this.nowRole,e),this.Skill.blood(this.nowRole,i,!0),t()},endMove:function(t){for(var n=hjm._top.getChildren(),e=0;e<n.length;e++)n[e].parent=n[e].father;t()},attack:function(t){if(this.nowRole.hp<=0)return t();this.nowRole.type===this.turn?this.node.getComponent("Skill").play(t,this.nowRole,this.nowPos):1===this.turn&&0===this.nowRole.type&&this.nowRole.skillData.atkFun?this.nowRole.skillData.atkFun(t,this.nowRole,this.nowPos):t()},getEnAtkPos:function(t){for(var n=[],e=-1e7,i=function(t,i){cc.log("\u654c\u4eba",i.x,i.y,t),t>e?(e=t,n=[i]):t===e&&n.push(i)},a=0;a<ai.h;a++)for(var o=0;o<ai.w;o++){var r=cc.v2(o,a),s=ai.map.get(r);if(s&&!0!==s.notRun.active)if(-1===ai.map.get(r,"type")){if((s=ai.map.get(r)).hp+ai.buffData.hp<=0){i(ai.buffData.hp,r);continue}var c=this.node.skillAi(s.skillName+"Ai",s,r);i(ai.buffData.hp+c,r)}else 1===ai.map.get(r,"type")?0===ai.buffData.hp?i(.5,r):i(-ai.buffData.hp,r):i(.5,r)}dyl.rand(n),this.runPos=n[0],tz(.2,function(){return t()})},createEn:function(t,n,e){n="en"+n;var i=(dyl.data("en."+n).isBoss?hjm._boss:hjm._en).add(n);hjm[n]=i.en;var a=ai.map.get(e);i.setPosition(a),i.setScale(0),i.hurt=!1,dyl.data("en."+n,i,{skillName:function(t){return zt.setSkill(i,t),t}}),i.type=-1,i.father=i.parent,i.notRun=!1,i.skillData={},i.atkAdd||(i.atkAdd=0),this.addAtkAdd(i,-i.atkAdd),ai.map.set(e,i);tz([a,.6,[0,0],i,.6,[1,1]],function(){a.del(),t()})},addState:function(t){for(var n=0;n<ai.buffArr.length;n++){var e=ai.buffArr[n];if(e.name===t)return void(t.num+=e.num)}ai.buffArr.push(t)},runState:function(t,n){for(var e=ai.buffArr,i=[],a=0;a<e.length;a++)e[a].delState!==n&&i.push(e[a]);e=i,i=[];for(var o=0;o<e.length;o++){var r=e[o];r.state===n&&(r.fun(r),!0!==r.delState&&i.push(r))}ai.buffArr=i,t()},addEn:function(t){var n=ai.enNameArr[this.levelId];if("number"==typeof n){var e=n;n=[].concat(i(ai.bossNameData[e][ai.bossTypeIdArr[e]]))}else n=[].concat(i(n));for(var a=0;a<n.length;a++){var o=n[a];o>=100||(n[a]=o+ai.enTypeIdArr[o])}this.myLog(JSON.stringify(n));var r=dyl.counter(function(){return t()});r(n.length);for(var s=[],c=[],u=0;u<ai.h;u++)for(var h=0;h<ai.w;h++){var d=cc.v2(h,u),l=ai.map.get(d);l&&!l.type&&(l.skillData.name?c.push(d):s.push(d))}dyl.rand(s),dyl.rand(c);for(var f=[].concat(s,c),p=0;p<n.length;p++){var m=n[p];this.createEn(r,m,f[p])}},reviveRole:function(t,n,e){n.hp=20;var i=ai.map.get(e);n.setPosition(i),n.setScale(0),n.notRun=!1,ai.map.set(e,n);tz([i,.4,[0,0],n,.4,[1.2,1.2]],[n,.2,[1,1]],function(){i.del(),t()})},revive:function(t){var n=this;(function(){for(var e=[].concat(i(hjm._top.getChildren())),a=e.length-1;a>=0;a--)e[a].parent=e[a].father;for(var o=[],r=0;r<ai.h;r++)for(var s=0;s<ai.w;s++){var c=cc.v2(s,r),u=ai.map.get(c);u&&!u.type&&o.push(c)}dyl.rand(o);var h=dyl.counter(function(){n.checkDie(t)});h(3);for(var d=0;d<3;d++){var l=hjm._me.add();l.hurt=!1;var f=o[d];n.reviveRole(h,l,f)}})()},showCard:function(t){var n=hjm._show;n.bg=cc.color(0,0,0),n.active=!0,n.spr=cc.color(172,172,172),n.spr=!0,n.spr=t.card,dyl.data("card."+t.name,n,["show"])},show:function(t){var n=t.in.apply(t,i(ai.cardArr));if(n)this.showCard(n);else{var e=ai.posMap.find(t),a=ai.map.get(e),o=hjm._show;o.active=!0,o.spr=cc.color(0,0,0),a&&a.type?(o.spr=!0,o.hp=a.hp,o.atk=a.atk,o.spr=a.type>0?a.me:a.en,o.sprBg=a,o.bg=ai.colorArr[a.type],dyl.data("skill."+a.skillName,o,["show"])):a&&(o.spr=!1,o.sprBg=a,o.hp="",o.atk="",o.show="\u53ea\u80fd\u7528\u6765\u79fb\u52a8\uff0c\u6ca1\u6709\u5176\u4ed6\u4f5c\u7528\u7684\u7a7a\u5757",o.sprBg=cc.color(255,255,255),o.bg=ai.colorArr[0])}},backButton:function(){hjm._button=[!1]},restartButton:function(){hjm("gameData"),cc.director.loadScene(cc.director.getScene().name)},readButton:function(){cc.director.loadScene(cc.director.getScene().name)},showSure:function(){hjm._sure=[!0]},backSure:function(){hjm._sure=[!1]},reviveButton:function(){var t=this;hjm._revive=[!1],cc.log("\u5e7f\u544a"),this.revive(function(){return t.end(1)})},noreviveButton:function(){tz(.1,hjm._lose,"active",!0)}}),cc._RF.pop()},{}],Jiantou:[function(t,n,e){"use strict";cc._RF.push(n,"511baaCm6ZI2oiNgVEdBS6S","Jiantou"),cc.Class({extends:cc.Component,properties:{jiantou:cc.Node},onLoad:function(){this.t=0,this.d=100},update:function(t){for(this.t+=130*t;this.t>=this.d;)this.t-=this.d;this.t>.5*this.d?this.jiantou.y=-180+this.t-this.d:this.jiantou.y=-180-this.t}}),cc._RF.pop()},{}],OldTz:[function(t,n,e){"use strict";cc._RF.push(n,"3fe37RQFypN+ZLDtUJC8dXA","OldTz"),cc._RF.pop()},{}],Shou:[function(t,n,e){"use strict";cc._RF.push(n,"229bdLLl3NCgLTN+EBf1X7e","Shou"),cc.Class({extends:cc.Component,properties:{shou:cc.Node},onLoad:function(){this.t=0,this.d=40},update:function(t){for(this.t+=40*t;this.t>=this.d;)this.t-=this.d;this.t>.5*this.d?(this.shou.x=-(-20+this.t-this.d),this.shou.y=-20+this.t-this.d):(this.shou.x=-(-20-this.t),this.shou.y=-20-this.t)}}),cc._RF.pop()},{}],SkillAi:[function(t,n,e){"use strict";cc._RF.push(n,"e38c5XEt15GArjSgj5yC8cA","SkillAi"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=this;this.node.skillAi=function(n,e,i){return cc.log("name",n),t[n](e,i)}},oneAi:function(t,n){var e=-t.type;return ai.map.on(function(t,n){if(ai.map.get(n,"type")===e)return!0}),ai.map.on(ai.nullPos)?t.atk+ai.buffData.atk:0},aoeAi:function(t,n){var e=-t.type,i=0;return ai.map.on(function(t,n){ai.map.get(n,"type")===e&&i++}),ai.map.on(ai.nullPos),(t.atk+ai.buffData.atk)*i},berserkerAi:function(t,n){return this.oneAi(t,n)},bossAi:function(t,n){return this.aoeAi(t,n)},bossGetHurtAi:function(t,n){return this.oneAi(t,n)},enGetHurtAi:function(t,n){return this.oneAi(t,n)},bossMomAi:function(t,n){var e=-t.type,i=0,a=0;return ai.map.on(function(t,n){var o=ai.map.get(n);o&&o.type===e?i++:o&&!o.type&&a++}),ai.map.on(ai.nullPos),(t.atk+ai.buffData.atk)*i+2*a},enMomAi:function(t,n){return this.oneAi(t,n)},bossMoreAoeAi:function(t,n){return 1e4},bossVirusAi:function(t,n){return 1e4},enMoreAoeAi:function(t,n){return this.oneAi(t,n)},bossAngelAi:function(t,n){return this.oneAi(t,n)},bossDefAi:function(t,n){return this.oneAi(t,n)},bossBrotherAi:function(t,n){return this.oneAi(t,n)},bossAngerAi:function(t,n){return this.aoeAi(t,n)},bossHerculesAi:function(t,n){return 1e4},bossDivideAi:function(t,n){return 1e3},hypnosisAi:function(t,n){var e=-t.type,i=0;return ai.map.on(function(n,a){var o=ai.map.get(a);o&&o.type&&o!==t&&(ai.map.on(function(t,n){if(ai.map.get(n,"type")===e)return i+=o.atk,!0}),ai.map.on(a))}),ai.map.on(ai.nullPos),i},bossGravitationAi:function(t,n){return 1e3},weakAi:function(t,n){return 2*this.oneAi(t,n)},bossLeaderAi:function(t,n){return this.oneAi(t,n)},bossFenlieAi:function(t,n){return this.oneAi(t,n)},bossSacrificeAi:function(t,n){return this.oneAi(t,n)},bossFallAi:function(t,n){return this.oneAi(t,n)},soldierCrazyAi:function(t,n){return this.oneAi(t,n)},bossOddEvenAi:function(t,n){return this.oneAi(t,n)},smallOddEvenDefAi:function(t,n){return this.oneAi(t,n)},bossHalfAtkAi:function(t,n){return this.oneAi(t,n)},twinsAi:function(t,n){return this.oneAi(t,n)},bossAoeAi:function(t,n){return this.aoeAi(t,n)},smallAddBossHpAi:function(t,n){return this.oneAi(t,n)},eggAi:function(t,n){return this.oneAi(t,n)},bossBirdAi:function(t,n){return this.aoeAi(t,n)},testAi:function(t,n){return this.aoeAi(t,n)}}),cc._RF.pop()},{}],Skill:[function(t,n,e){"use strict";cc._RF.push(n,"8ee5fYPw6xEYp5UflGG9C1W","Skill");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};cc.Class({extends:cc.Component,properties:{},play:function(t,n,e){var i=n.atkName;"function"==typeof this[i]&&this[i](t,n,e)},delNullRoleState:function(t){t.card=!1,t.num=!1,t.type=0,t.skillData={}},die:function(t,n,e){var i=hjm._null.add();this.delNullRoleState(i),i.father=i.parent,i.setPosition(n),ai.map.set(e,i),i.setScale(1);var a=function(t,n,e){return(n-t)*e+t};return tz(n,"hurt",!0,function(t){var e=t/.15;return e>=1?(n.opacity=255,n.del()):n.opacity=a(255,0,e),t-.15}),n.dieName?this[n.dieName](t,n,e):t()},oneAttack:function(t,n,e,i){var a=0;(a="number"==typeof i?i:t.atk)<0&&(a=0),this.getHurt(n,t,a)},getHurt:function(t,n,e){t.defName&&null===(e=this[t.defName](t,n,e))||(this.blood(t,-e),t.getHurtName&&this[t.getHurtName](t,n,e))},blood:function(t,n,e){t.hp+=n;var i=t.getChildByName("hp");n>0?tz(i,[.1,[2,2]],[.15,[1,1]]):n<0&&tz(i,[.1,[2,2]],[.15,[1,1]]),e||hjm._hurt.add(t,n)},oneAct:function(t,n,e,i,a){var o=this,r=ai.map.get(i);if(r.type){var s=i.sub(e);tz(n,[!0,.2,s.mul(-120),[1.2,1.2]],[!0,.005,s.mul(120)],function(){"number"==typeof a?o.oneAttack(n,r,e,a):a?a(n,r,e):o.oneAttack(n,r,e)},[!1,n,.1,[1,1],!0,r,.1,s.mul(150)],[!0,r,.15,s.mul(-150)],function(){return t()})}else t()},backAct:function(t,n,e,i){for(var a=[],o=[],r=[],s=0;s<e.length;s++){var c=e[s],u=ai.map.get(c);if(!u)return cc.warn("\u8fd9\u91cc\u6ca1\u6709\u53ef\u79fb\u52a8\u8282\u70b9");var h=e[s].sub(n).mul(200);u.parent=hjm._top;var d=h.x?[.9,1.1]:[1.1,.9];a.push(!0,u,.1,h,!1,.1,d),o.push(!0,u,.2,h.mul(-1),!1,.2,[1,1]),r.push(u)}i?tz(r,"hurt",!0,a,r,"hurt",!1,o,function(){return t()}):tz(a,o,function(){return t()})},aoeAct:function(t,n,e,i,a){var o=dyl.counter(function(){return t()});o(2);n.aoe=!0,tz([!0,n,.1,!1,[720],[1.5,1.5]],[!0,n,.1,!1,[720],[1,1]],function(){n.aoe=!1,o()}),this.aoeFun(o,n,e,i,a)},aoeFun:function(t,n,e,i,a){var o=dyl.counter(function(){return t()});o(2);for(var r=[],s=0;s<i.length;s++){var c=i[s],u=ai.map.get(c);r.push(u),"number"==typeof a?this.oneAttack(n,u,e,a):a?a(n,u,e):this.oneAttack(n,u,e)}this.backAct(o,e,i,!0),o()},aid:function(t,n,e){var i,a=this,o=n.type,r=[[this,"one",n,e]];ai.map.on(function(t,n){ai.map.get(n,"type")===o&&r.push([a,"one",ai.map.get(n),n])}),ai.map.on(e),r.push(function(){return t()}),(i=zt).addRunFun.apply(i,r)()},aid2:function(t,n,e){var i,a=this,o=n.type,r=[[this,"one",n,e]];ai.map.find(function(t,e){t&&t!==n&&t.type===o&&r.push([a,"one",ai.map.get(e),e])}),r.push(function(){return t()}),(i=zt).addRunFun.apply(i,r)()},one2:function(t,n,e,i){var a=[this,"one",n,e,i],o=[this,"one",n,e,i];zt.addRunFun(a,o,function(){return t()})()},one3:function(t,n,e,i){var a=[this,"one",n,e,i],o=[this,"one",n,e,i],r=[this,"one",n,e,i];zt.addRunFun(a,o,r,function(){return t()})()},one4:function(t,n,e,i){var a=[this,"one",n,e,i],o=[this,"one",n,e,i],r=[this,"one",n,e,i],s=[this,"one",n,e,i];zt.addRunFun(a,o,r,s,function(){return t()})()},one:function(t,n,e,i){var a=-n.type,o=[];if(ai.map.on(function(t,n){ai.map.get(n,"type")===a&&o.push(n)}),ai.map.on(e),!(o.length>0))return t();var r=o[dyl.rand(o.length)];this.oneAct(t,n,e,r,i)},jointForces:function(t,n,e){var i=n.type;return ai.map.on(function(t,e){if(ai.map.get(e,"type")===i){var a=ai.map.get(e),o=a.atk;ai.gameMain.addAtkAdd(a,-o),ai.gameMain.addAtkAdd(n,o)}}),ai.map.on(e),this.one(t,n,e)},jointForces2:function(t,n,e){var i=n.type,a=n.atk;return ai.map.on(function(t,n){if(ai.map.get(n,"type")===i){var e=ai.map.get(n);ai.gameMain.addAtkAdd(e,a)}}),ai.map.on(e),this.aoe(t,n,e)},bossHercules:function(t,n,e){var i=this,a=-n.type,o=null,r=null;ai.map.on(function(t,n){ai.map.get(n,"type")===a?o=n:ai.map.get(n)&&(r=n)}),ai.map.on(e);var s=o||r,c=ai.map.get(s);c.parent=hjm._top;var u=n.atk,h=s.sub(ai.nullPos),d=.2*Math.sqrt(h.x*h.x+h.y*h.y);tz(c,[d,ai.posMap.get(ai.nullPos)],function(){c.parent=c.father,ai.map.set(ai.nullPos,s),ai.map.on(function(t,e){hjm._hurtMap.add(ai.posMap.get(e)),ai.map.get(e,"type")===a&&i.getHurt(ai.map.get(e),n,u)}),ai.map.on(ai.nullPos),hjm._hurtMap.add(ai.posMap.get(ai.nullPos)),ai.nullPos=s,c.type===a&&i.getHurt(c,n,u),tz(.2,function(){return t()})})},shadow:function(t,n,e){var i=this,a=null;if(ai.map.find(function(t,n){t&&"shadow"===t.skillData.name&&(a=n)}),!a){var o=function(t,e){cc.log("newShadow"),t.skillData.name="shadow",t.num=n.atk,t.card=n.me,t.card=!0,t.num=!0,t.skillData.atkFun=function(n,e,a){ai.map.on(function(t,n){if(-1===ai.map.get(n,"type"))return n});var o=ai.map.on(a);if(!o)return n();i.oneAct(n,e,a,o,function(n,e,a){i.blood(e,-t.num)})},cc.log("newShadow end",e)};ai.map.find(function(t,n){if(t&&0===t.type&&!t.skillData.name)return o(t,n),!0});return this.one(t,n,e)}var r=[this,"one",n,e],s=ai.map.get(a),c=[s.skillData,"atkFun",s,a];zt.addRunFun(r,c,function(){return t()})()},shadow2:function(t,n,e){var i,a=this,o=[];ai.map.find(function(t,n){t&&"shadow"===t.skillData.name&&o.push(n)});for(var r=[[this,"one",n,e]],s=0;s<o.length;s++){var c=ai.map.get(o[s]);r.push([c.skillData,"atkFun",c,o[s]])}(i=zt).addRunFun.apply(i,r.concat([function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},e=function(t,e){t.skillData.name="shadow",t.num=n.atk,t.card=n.me,t.card=!0,t.num=!0,t.skillData.atkFun=function(n,e,i){ai.map.on(function(t,n){if(-1===ai.map.get(n,"type"))return n});var o=ai.map.on(i);if(!o)return n();a.oneAct(n,e,i,o,function(n,e,i){a.blood(e,-t.num)})}};ai.map.find(function(t,n){if(t&&0===t.type&&!t.skillData.name)return e(t),!0});t()},function(){return t()}]))()},aoe:function(t,n,e,i){var a=-n.type,o=[];if(ai.map.on(function(t,n){ai.map.get(n,"type")===a&&o.push(n)}),ai.map.on(e),!(o.length>0))return t();this.aoeAct(t,n,e,o,i)},aoe2:function(t,n,e){return bossGravitation(t,n,e)},bossGravitation:function(t,n,e){var i=this,a=function(t,n){var e=ai.posMap.get(t),i=ai.posMap.get(n),a=ai.map.get(t),o=ai.map.get(n);ai.map.set(t,n);var r=[];a?r.push(a):ai.nullPos=n,o?r.push(o):ai.nullPos=t;tz(r,[.5,[0,0]],function(){a&&a.setPosition(i),o&&o.setPosition(e)},[.5,[1,1]])},o=-n.type,r=[];ai.map.on(function(t,n){ai.map.get(n,"type")!==o&&r.push(n)}),ai.map.on(e);var s=[];ai.map.find(function(t,n){if(t&&t.type===o){var i=n.sub(e);1!==Math.abs(i.x+i.y)&&s.push(n)}}),s.length>r.length?s.length=r.length:r.length=s.length;for(var c=0;c<r.length;c++)a(r[c],s[c]);r.length>0?tz(1.3,function(){i.aoe(t,n,e)}):this.aoe(t,n,e)},hypnosis:function(t,n,e){var i=this,a=-n.type,o=[];if(ai.map.on(function(t,n){ai.map.get(n,"type")&&o.push(n)}),ai.map.on(e),!(o.length>0))return t();var r=o.length,s=null;(s=function(){if(--r<0)t();else{var n=o[r];ai.map.on(function(t,n){if(ai.map.get(n,"type")==a)return n});var e=ai.map.on(n);i.oneAct(s,ai.map.get(n),n,e)}})()},doctor:function(t,n,e){var i=this,a=-n.type,o=[],r=[e];if(ai.map.on(function(t,e){var i=ai.map.get(e,"type");i===a?o.push(e):i===n.type&&r.push(e)}),ai.map.on(e),o.length>0)return this.one(t,n,e);for(var s=0;s<r.length;s++){var c=ai.map.get(r[s]);this.blood(c,1)}var u=e,h=ai.nullPos,d=ai.posMap.get(h);ai.map.set(u,h),ai.nullPos=u;var l=h.sub(u),f=l.x,p=l.y,m=.18*Math.sqrt(f*f+p*p),y=ai.posMap.get(u),v=d.add(y).mul(.5);tz(.5,n,[.1,[1.1,1.1]],[.1,[1,1]],[.5*m,[1.2,1.2],v],[.5*m,[1,1],d],function(){return i.one(t,n,h)})},weak:function(t,n,e){var i=this;return this.one(t,n,e,function(t,n,e){i.addAtkAdd(n,-t.atk),i.oneAttack(t,n,e)})},weiou:function(t,n,e){var i=this,a=-n.type,o=null,r=0;if(ai.map.on(function(t,e){if(ai.map.get(e,"type")===a){for(var i=dyl.addDirArr(e),s=0,c=0;c<4;c++)ai.map.get(i[c],"type")===n.type&&s++;r<s&&(o=e,r=s)}}),ai.map.on(e),!o)return t();var s=[];ai.map.on(function(t,e){ai.map.get(e,"type")===n.type&&(ai.map.get(e)!==n&&s.push(e))}),ai.map.on(o);for(var c=t,u=function(t){var n=c,e=ai.map.get(s[t]),a=s[t];c=function(){i.oneAct(n,e,a,o)}},h=0;h<s.length;h++)u(h);this.oneAct(c,n,e,o)},weiou2:function(t,n,e){var i=this,a=-n.type,o=null,r=0;if(ai.map.on(function(t,n){if(ai.map.get(n,"type")===a){for(var e=dyl.addDirArr(n),i=0,s=0;s<4;s++)ai.map.get(e[s],"type")&&i++;r<i&&(o=n,r=i)}}),ai.map.on(e),!o)return t();var s=[];ai.map.on(function(t,e){ai.map.get(e,"type")&&(ai.map.get(e)!==n&&s.push(e))}),ai.map.on(o);for(var c=t,u=function(t){var n=c,e=ai.map.get(s[t]),a=s[t];c=function(){i.oneAct(n,e,a,o)}},h=0;h<s.length;h++)u(h);this.oneAct(c,n,e,o)},wander:function(t,n,e){var i=ai.nullPos.sub(e);return 1===Math.abs(i.x+i.y)?this.wanderFun(t,n,e):this.one(t,n,e)},wanderFun:function(t,n,e){var i=this,a=dyl.counter(function(){return t()});a(4);var o=-n.type,r=function(t){var e=[];ai.map.on(function(t,n){ai.map.get(n,"type")===o&&e.push(n)}),ai.map.on(t),e.length?i.aoeFun(a,n,t,e):a()},s=e,c=ai.nullPos,u=e;tz(function(){r(s)},n,[.2,ai.posMap.get(c)],function(){r(c)},[.2,ai.posMap.get(u)],function(){r(u),a()})},throwBoxFun:function(t,n,e){var i=this,a=this,o=dyl.counter(function(){return t()}),r=-n.type;o(3);var s=ai.nullPos.sub(e).mul(.5),c=e.add(s),u=ai.map.get(c);tz(n,[!0,.2,s.mul(-100)],[!0,.1,s.mul(100)],function(){return o()}),tz(u,.2+.1,[.2,ai.posMap.get(ai.nullPos)],function(){o()}),tz(.5,function(){var t=[],e=ai.nullPos;ai.map.set(ai.nullPos,c),ai.nullPos=c;var s=n.atk;u.type===r&&(i.getHurt(u,n,2*s),s=u.atk),ai.map.on(function(n,e){ai.map.get(e,"type")===r&&t.push(e)}),ai.map.on(e);t.length?a.aoeFun(o,u,e,t,function(t,n,e){a.getHurt(n,t,s)}):o()})},throwBox:function(t,n,e){var i=ai.nullPos.sub(e);return 4===i.x*i.x+i.y*i.y?this.throwBoxFun(t,n,e):this.aoe(t,n,e)},bossMom:function(t,n,e){var i=dyl.counter(function(){return t()});i(2);var a=-n.type,o=[],r=[];if(ai.map.on(function(t,n){var e=ai.map.get(n);ai.map.get(n,"type")===a?o.push(n):e&&!e.type&&r.push(n)}),ai.map.on(e),this.addEnArr(i,r,"en109"),!(o.length>0))return i();this.aoeAct(function(){return i()},n,e,o)},bossDivide:function(t,n,e){var i=this,a=dyl.counter(function(){return t()});a(2);var o=-n.type,r=[],s=n.atk;ai.map.on(function(t,e){var a=ai.map.get(e);hjm._hurtMap.add(ai.posMap.get(e)),ai.map.get(e,"type")===o?i.getHurt(ai.map.get(e),n,s):a&&!a.type&&r.push(e)}),ai.map.on(e);var c=n.hp;this.addEnArr(a,r,"en119",c),this.getHurt(ai.map.get(e),n,999),tz(.3,function(){return a()})},bossVirus:function(t,n,e){var i=this,a=-n.type,o=[],r=[],s=[];if(ai.map.on(function(t,e){var i=ai.map.get(e),c=ai.map.get(e,"type");c===a?o.push(e):c===n.type?s.push(e):i&&r.push(e)}),ai.map.on(e),!(r.length+s.length>0))return this.aoeAct(t,n,e);var c=dyl.counter(function(){for(var a=0;a<s.length;a++){var o=s[a],r=ai.map.get(o);r.del(),r.setScale(1);var c=hjm._null.add();i.delNullRoleState(c),c.father=c.parent,c.setPosition(ai.posMap.get(o)),ai.map.set(o,c),c.setScale(1),i.blood(n,1),n.atk++}tz(.3,function(){return i.aoe(t,n,e)})});if(c(2),this.addEnArr(c,r,"en105"),s.length){for(var u=[],h=0;h<s.length;h++)u.push(ai.map.get(s[h]));tz(u,[.6,ai.posMap.get(e),[0,0]],function(){return c()})}else c()},bossMoreAoe:function(t,n,e){var i=dyl.counter(function(){return t()}),a=[];ai.map.on(function(t,e){ai.map.get(e);ai.map.get(e,"type")===n.type&&a.push(e)}),ai.map.on(),i(a.length);for(var o=n.atk,r=0;r<a.length;r++){var s=a[r],c=ai.map.get(s);this.aoe(function(){return i()},c,s,o)}},addEnArr:function(t,n,e,i){var a=dyl.counter(function(){return t()});a(n.length+1);for(var o=0;o<n.length;o++)this.newEn(a,n[o],e,i);a()},addAtkAdd:function(t,n){cc.log("addAtkAdd 1",t,n,void 0===n?"undefined":i(n)),t.atk+=n,t.atk<0&&(n-=t.atk,t.atk=0),t.atkAdd+=n,t.atkAdd>0?t.atk=cc.color(14,179,21):0===t.atkAdd?t.atk=cc.color(87,87,87):t.atk=cc.color(248,50,50)},newEn:function(t,n,e,i){var a=(dyl.data("en."+e).isBoss?hjm._boss:hjm._en).add(e);hjm[e]=a.en;var o=ai.map.get(n);if(a.setPosition(o),a.setScale(0),a.hurt=!1,a.skillData={},dyl.data("en."+e,a,{skillName:function(t){return zt.setSkill(a,t),t}}),a.type=-1,a.father=a.parent,a.notRun=!1,a.atkAdd||(a.atkAdd=0),this.addAtkAdd(a,-a.atkAdd),"number"==typeof i&&(a.hp=i),ai.map.set(n,a),!t)return o.setScale(0),o.del(),a.setScale(1),a;return tz([o,.4,[0,0],a,.4,[1.2,1.2]],[a,.2,[1,1]],function(){o.del(),t()}),a},payback2:function(t,n,e){var i=this,a=n.type;ai.map.find(function(t){t&&t.type===a&&i.addAtkAdd(t,e)})},payback:function(t,n,e){this.addAtkAdd(t,e)},bossFall:function(t,n,e){var i=this;return 0>=t.hp?e:(ai.map.find(function(t,n){if(t&&!t.type)return i.newEn(null,n,"en128",e),!0}),e)},bossBrother:function(t,n,e){return t.hp<=0?e:(ai.map.find(function(n){if(n&&n.type===t.type&&n!==t)return n.hp+=e,!0}),e)},berserker:function(t,n,e){return t.atk+=1,e},bossGetHurt:function(t,n,e){var i=this;return ai.map.find(function(t){t&&-1===t.type&&!t.isBoss&&i.blood(t,2)}),e},enGetHurt:function(t,n,e){var i=this;return ai.map.find(function(t){t&&-1===t.type&&t.isBoss&&i.blood(t,1)}),e},twins:function(t,n,e){var i=n.type,a=0;ai.map.find(function(t,n){t&&t.type===i&&a<t.hp&&(a=t.hp)}),a>n.hp&&this.blood(n,a-n.hp),tz(.4,function(){return t()})},soldierCrazyPreTurn:function(t,n,e){if(this.blood(n,-1),n.hp<=0){var i=2*n.atk;this.newEn(t,e,"en130").atk=i}else t()},bossAngerPreTurn:function(t,n,e){n.atk+=2,tz(n,[.1,[1.2,1.2]],[.2,[1,1]],function(){return t()})},bossAngel:function(t,n,e){var i=this,a=n.type;ai.map.find(function(t){t&&t.type===a&&i.blood(t,1)}),tz(.5,function(){return t()})},bossOddEvenPreTurn:function(t,n,e){n.hp%2==0&&(n.atk*=2),t()},bossBird:function(t,n,e){var i=n.type;ai.map.find(function(t,n){t&&t.type===i&&!t.isBoss&&(t.atk+=2)}),t()},bossDefPreTurn:function(t,n,e){n.en=cc.color(252,186,16),n.isBossDef=!0,tz(.5,function(){return t()})},bossLeader:function(t,n,e){n.skillData.num?n.skillData.num++:n.skillData.num=1;var i=3,a=[],o=n.type;ai.map.find(function(t,n){ai.map.get(n,"type")===o?i--:0===ai.map.get(n,"type")&&a.push(n)}),i<1&&t(),dyl.rand(a);var r=dyl.counter(function(){return t()});r(i);for(var s=0;s<i;s++){this.newEn(function(){return r()},a[s],"en125").atk=n.skillData.num}},soldierCrazyDie:function(t,n,e){if(n.skillData.isBossKill)return t();var i=2*n.atk;this.newEn(t,e,"en130").atk=i},bossSacrifice:function(t,n,e){var i=this;ai.map.find(function(t,e){t&&n!==t&&t.type===n.type&&(t.atk*=2,i.blood(t,t.hp))}),t()},egg:function(t,n,e){this.addEnArr(t,[e],"en137")},bossFenlie:function(t,n,e){var i=dyl.counter(function(){return t()});i(2);n.type;var a=[];n.atk;ai.map.on(function(t,n){var e=ai.map.get(n);hjm._hurtMap.add(ai.posMap.get(n)),e&&!e.type&&a.push(n)}),ai.map.on(e),this.addEnArr(i,a,"en126"),tz(.3,function(){return i()})},bossDefDie:function(t,n,e){n.isBossDef=!1,n.en=cc.color(0,0,0),t()},boss:function(t,n,e){var i=this,a=n.type;ai.map.find(function(t){t&&t.type===a&&(t.skillData.isBossKill=!0,i.blood(t,-9999))}),t()},enMom:function(t,n,e){var i=this,a=!1;ai.map.find(function(n){n&&n.isBoss&&(n.atk+=1,i.blood(n,2),a=!0,t())}),a||t()},bossHalfAtk:function(t,n,e){return ai.gameMain.addAtkAdd(t,-Math.floor(.5*t.atk)),e},bossOddEvenDef:function(t,n,e){return t.hp%2==0?e:e>1?1:e},smallAddBossHp:function(t,n,e){var i=this;return ai.map.find(function(t,n){t&&t.isBoss&&i.blood(t,e)}),0},smallOddEvenDef:function(t,n,e){var i=this;return ai.map.find(function(t,n){t&&t.isBoss&&i.blood(t,-1)}),0},enMoreAoe:function(t,n,e){return 0},bossDefDef:function(t,n,e){return t.isBossDef?(t.en=cc.color(0,0,0),t.isBossDef=!1,0):e},test:function(t,n,e){return this.aoe(t,n,e)},mySkill:function(t,n,e){return this.throwBox(t,n,e)}}),cc._RF.pop()},{}],WinGame:[function(t,n,e){"use strict";cc._RF.push(n,"f1704u/9UxFAJZ5wW12ZNug","WinGame"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var t=this;ai.winGame=function(){return t.winGame()}},winGame:function(){}}),cc._RF.pop()},{}],ad:[function(t,n,e){"use strict";cc._RF.push(n,"1081ejCOb1MxL/hvck1pdnI","ad"),cc.Class({extends:cc.Component,properties:{},start:function(){this.isShowAd=!1},update:function(t){this.isShowAd||yomob.TGSDK.couldShowAd("GfadZFzn2F1ngCMLwQE")&&(hjm._test.lab2+="a",yomob.TGSDK.showAd("GfadZFzn2F1ngCMLwQE"),hjm._test.lab2+="b",dyl.__adFun(),this.isShowAd=!0,this.node.destroy())}}),cc._RF.pop()},{}],show:[function(t,n,e){"use strict";cc._RF.push(n,"b3f70wYU95NAovlFoFWkv0S","show");var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};cc.Class({extends:cc.Component,properties:{},start:function(){this.str="";var t=String(hjm.isTeach)+" "+i(hjm.isTeach);this.addStr(t);var n=hjm.data.myRoleArr,e=JSON.stringify(n);this.addStr(e);var a=String(hjm.data.num)+" "+i(hjm.data.num);this.addStr(a);var o=String(hjm.data.levelId)+" "+i(hjm.data.levelId);this.addStr(o);var r=String(hjm.enTypeId)+" "+i(hjm.enTypeId);this.addStr(r);var s=String(hjm.isNew)+" "+i(hjm.isNew);this.addStr(s)},addStr:function(t){this.str+=t+"\n",hjm._test.lab=this.str}}),cc._RF.pop()},{}],tail:[function(t,n,e){"use strict";cc._RF.push(n,"74025EKLDxNY4mcMDMfW6h1","tail"),cc.Class({extends:cc.Component,properties:{},update:function(t){var n=this.node.tailPool.add();n.setPosition(this.node);tz(function(t){return n.setScale(.3-t),t-.3},function(){n.del()})}}),cc._RF.pop()},{}],test:[function(t,n,e){"use strict";cc._RF.push(n,"23cd1RDOBxMxbOCfMdn90Zu","test"),cc.Class({extends:cc.Component,properties:{},start:function(){setTimeout(function(){hjm._a.active=!1},6e3);var t=tz(hjm._b);t([[1,cc.v2(-2500,0)]]),t([[1,cc.v2(-2e3,0)]]),t([[1,cc.v2(-1500,0)]]),t([[1,cc.v2(-1e3,0)]]),t([[1,cc.v2(-500,0)]]),t([[1,cc.v2(0,0)]]),t(["active",!1])}}),cc._RF.pop()},{}]},{},["ad","DylAd","DylBar","DylButton","DylLab","DylList","DylMain","DylPool","DylTileMap","DylWindow","DylWuli","OldTz","show","CardSkill","Data","Fun","GameInit","GameMain","Jiantou","Shou","Skill","SkillAi","WinGame","tail","test"]);